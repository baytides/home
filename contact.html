<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Contact | Bay Tides</title>
    <meta
      name="description"
      content="Get in touch with Bay Tides. Questions about volunteering, partnerships, or donations? We'd love to hear from you."
    />

    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://baytides.org/contact.html" />
    <meta property="og:title" content="Contact | Bay Tides" />
    <meta
      property="og:description"
      content="Get in touch with Bay Tides. Questions about volunteering, partnerships, or donations? We'd love to hear from you."
    />
    <meta property="og:image" content="https://baytides.org/assets/images/hero-bg.jpg" />
    <meta name="twitter:card" content="summary_large_image" />

    <link rel="icon" type="image/png" href="assets/images/favicon.png" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="assets/css/style.css" />

    <!-- Privacy-friendly analytics by Plausible -->
    <script
      defer
      data-domain="baytides.org"
      src="https://plausible.baytides.org/js/script.js"
    ></script>

    <!-- Cloudflare Turnstile -->
    <script src="https://challenges.cloudflare.com/turnstile/v0/api.js" async defer></script>

    <!-- Mapbox -->
    <script src="https://api.mapbox.com/mapbox-gl-js/v3.3.0/mapbox-gl.js"></script>
    <link href="https://api.mapbox.com/mapbox-gl-js/v3.3.0/mapbox-gl.css" rel="stylesheet" />
  </head>
  <body>
    <!-- Header loaded dynamically -->
    <div id="header-placeholder"></div>

    <main id="main-content">
      <!-- Page Hero -->
      <section class="hero hero-page">
        <div class="container">
          <h1>Get in Touch</h1>
          <p>We'd love to hear from you</p>
        </div>
      </section>

      <!-- Contact Section -->
      <section class="contact-section">
        <div class="container">
          <div class="contact-grid">
            <div class="contact-form">
              <h2>Send Us a Message</h2>
              <p>
                Have questions? Want to volunteer or partner with us? Fill out the form below and
                we'll get back to you soon.
              </p>

              <!-- Cloudflare Worker form handler -->
              <form action="https://forms.baytides.org" method="POST">
                <input type="hidden" name="form_type" value="contact" />
                <input
                  type="hidden"
                  name="redirect"
                  value="https://baytides.org/contact.html?submitted=true"
                />
                <!-- Honeypot spam protection -->
                <input type="checkbox" name="botcheck" class="hidden" style="display: none" />

                <div class="form-group">
                  <label for="name">
                    Name
                    <span aria-hidden="true">*</span>
                    <span class="sr-only">(required)</span>
                  </label>
                  <input
                    type="text"
                    id="name"
                    name="name"
                    placeholder="Your name"
                    required
                    autocomplete="name"
                  />
                </div>

                <div class="form-group">
                  <label for="email">
                    Email
                    <span aria-hidden="true">*</span>
                    <span class="sr-only">(required)</span>
                  </label>
                  <input
                    type="email"
                    id="email"
                    name="email"
                    placeholder="your@email.com"
                    required
                    autocomplete="email"
                  />
                </div>

                <div class="form-group">
                  <label for="topic">What can we help you with?</label>
                  <select id="topic" name="topic">
                    <option value="">Select a topic...</option>
                    <option value="volunteer">I want to volunteer</option>
                    <option value="partnership">Partnership inquiry</option>
                    <option value="donation">Donation question</option>
                    <option value="media">Media inquiry</option>
                    <option value="general">General question</option>
                  </select>
                </div>

                <div class="form-group">
                  <label for="message">
                    Message
                    <span aria-hidden="true">*</span>
                    <span class="sr-only">(required)</span>
                  </label>
                  <textarea
                    id="message"
                    name="message"
                    placeholder="Your message..."
                    required
                  ></textarea>
                </div>

                <!-- Cloudflare Turnstile widget -->
                <div
                  class="cf-turnstile"
                  data-sitekey="0x4AAAAAACJ4PUuzOaD_Xf63"
                  data-theme="auto"
                ></div>

                <button type="submit" class="btn btn-primary">Send Message</button>
              </form>
            </div>

            <div class="contact-info-panel">
              <h2>Our Service Area</h2>
              <p>Bay Tides serves communities throughout the San Francisco Bay Area.</p>

              <div
                id="bay-area-map"
                style="
                  border-radius: 8px;
                  overflow: hidden;
                  margin: 1.5rem 0;
                  width: 100%;
                  height: 300px;
                "
              ></div>

              <div class="contact-cta">
                <h3>Want to make an immediate impact?</h3>
                <a href="donate.html" class="btn btn-secondary">Make a Donation</a>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Newsletter Signup -->
      <section class="newsletter">
        <div class="container">
          <div class="newsletter-content">
            <h2>Stay Connected</h2>
            <p>
              Subscribe to our newsletter for updates on events, volunteer opportunities, and
              conservation news.
            </p>
            <!-- Cloudflare Worker newsletter handler -->
            <form class="newsletter-form" action="https://forms.baytides.org" method="POST">
              <input type="hidden" name="form_type" value="newsletter" />
              <input
                type="hidden"
                name="redirect"
                value="https://baytides.org/contact.html?subscribed=true"
              />
              <input type="checkbox" name="botcheck" style="display: none" />
              <label for="newsletter-email" class="sr-only">Email address</label>
              <input
                type="email"
                id="newsletter-email"
                name="email"
                placeholder="Enter your email"
                required
                autocomplete="email"
              />
              <button type="submit" class="btn btn-primary">Subscribe</button>
            </form>
          </div>
        </div>
      </section>
    </main>

    <!-- Footer loaded dynamically -->
    <div id="footer-placeholder"></div>

    <script src="assets/js/main.js"></script>
    <script>
      // Initialize Mapbox map with Bay Area counties highlighted
      mapboxgl.accessToken =
        'pk.eyJ1IjoiYmF5dGlkZXMiLCJhIjoiY21qdGt1NjVmNHQ2djNlcHlpa3p0MnViaSJ9.FHuSFIzE8EXe_9Vp5QpM2Q';

      const map = new mapboxgl.Map({
        container: 'bay-area-map',
        style: 'mapbox://styles/mapbox/light-v11',
        center: [-122.1, 37.75],
        zoom: 7.2,
        interactive: false,
      });

      // Bay Area county FIPS codes (state 06 = California)
      const bayAreaCounties = [
        '06001', // Alameda
        '06013', // Contra Costa
        '06041', // Marin
        '06055', // Napa
        '06075', // San Francisco
        '06081', // San Mateo
        '06085', // Santa Clara
        '06087', // Santa Cruz
        '06095', // Solano
        '06097', // Sonoma
      ];

      map.on('load', () => {
        // Add county boundaries from Mapbox's built-in data
        map.addSource('counties', {
          type: 'vector',
          url: 'mapbox://mapbox.82pkq93d',
        });

        // Highlight Bay Area counties with fill
        map.addLayer(
          {
            id: 'bay-area-fill',
            type: 'fill',
            source: 'counties',
            'source-layer': 'original',
            paint: {
              'fill-color': '#2d6a4f',
              'fill-opacity': 0.35,
            },
            filter: ['in', 'FIPS', ...bayAreaCounties],
          },
          'waterway-label'
        );

        // Add county borders
        map.addLayer(
          {
            id: 'bay-area-borders',
            type: 'line',
            source: 'counties',
            'source-layer': 'original',
            paint: {
              'line-color': '#1b4332',
              'line-width': 2,
            },
            filter: ['in', 'FIPS', ...bayAreaCounties],
          },
          'waterway-label'
        );
      });
    </script>
  </body>
</html>
