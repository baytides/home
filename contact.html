<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Contact | Bay Tides</title>
    <meta
      name="description"
      content="Get in touch with Bay Tides. Questions about volunteering, partnerships, or donations? We'd love to hear from you."
    />

    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://baytides.org/contact.html" />
    <meta property="og:title" content="Contact | Bay Tides" />
    <meta
      property="og:description"
      content="Get in touch with Bay Tides. Questions about volunteering, partnerships, or donations? We'd love to hear from you."
    />
    <meta property="og:image" content="https://baytides.org/assets/images/hero-bg.jpg" />
    <meta name="twitter:card" content="summary_large_image" />

    <link rel="icon" type="image/png" href="assets/images/favicon.png" />
    <link rel="apple-touch-icon" href="assets/images/logo.png" />

    <!-- Preload critical assets -->
    <link rel="preload" href="assets/images/hero-bg.webp" as="image" type="image/webp" />
    <link rel="preload" href="assets/css/style.css" as="style" />
    <link rel="preload" href="assets/js/main.js" as="script" />

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      rel="preload"
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      as="style"
      onload="
        this.onload = null;
        this.rel = 'stylesheet';
      "
    />
    <noscript>
      <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
        rel="stylesheet"
      />
    </noscript>

    <link rel="stylesheet" href="assets/css/style.css" />

    <!-- Cloudflare Turnstile -->
    <script src="https://challenges.cloudflare.com/turnstile/v0/api.js" async defer></script>

    <!-- Mapbox -->
    <script src="https://api.mapbox.com/mapbox-gl-js/v3.3.0/mapbox-gl.js"></script>
    <link href="https://api.mapbox.com/mapbox-gl-js/v3.3.0/mapbox-gl.css" rel="stylesheet" />

    <!-- Structured Data (JSON-LD) -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "ContactPage",
        "mainEntity": {
          "@type": "NonprofitOrganization",
          "name": "Bay Tides",
          "url": "https://baytides.org",
          "areaServed": {
            "@type": "Place",
            "name": "San Francisco Bay Area, California"
          }
        }
      }
    </script>
  </head>
  <body>
    <!-- Header loaded dynamically -->
    <div id="header-placeholder"></div>

    <main id="main-content">
      <!-- Breadcrumb Navigation -->
      <nav class="breadcrumb" aria-label="Breadcrumb">
        <div class="container">
          <ol>
            <li><a href="/">Home</a></li>
            <li aria-current="page">Contact</li>
          </ol>
        </div>
      </nav>

      <!-- Page Hero -->
      <section class="hero hero-page">
        <div class="container">
          <h1>Get in Touch</h1>
          <p>We'd love to hear from you</p>
        </div>
      </section>

      <!-- Contact Section -->
      <section class="contact-section">
        <div class="container">
          <div class="contact-grid">
            <div class="contact-form">
              <h2>Send Us a Message</h2>
              <p>
                Have questions? Want to volunteer or partner with us? Fill out the form below and
                we'll get back to you soon.
              </p>

              <!-- Form status announcements -->
              <div id="contact-form-status" aria-live="polite" aria-atomic="true"></div>

              <!-- Cloudflare Worker form handler -->
              <form action="https://forms.baytides.org" method="POST" id="contact-form">
                <input type="hidden" name="form_type" value="contact" />
                <input
                  type="hidden"
                  name="redirect"
                  value="https://baytides.org/contact.html?submitted=true"
                />
                <!-- Honeypot spam protection -->
                <input
                  type="checkbox"
                  name="botcheck"
                  class="hidden"
                  style="display: none"
                  aria-hidden="true"
                  tabindex="-1"
                />

                <div class="form-group">
                  <label for="name">
                    Name
                    <span aria-hidden="true">*</span>
                    <span class="sr-only">(required)</span>
                  </label>
                  <input
                    type="text"
                    id="name"
                    name="name"
                    placeholder="Your name"
                    required
                    autocomplete="name"
                  />
                </div>

                <div class="form-group">
                  <label for="email">
                    Email
                    <span aria-hidden="true">*</span>
                    <span class="sr-only">(required)</span>
                  </label>
                  <input
                    type="email"
                    id="email"
                    name="email"
                    placeholder="your@email.com"
                    required
                    autocomplete="email"
                  />
                </div>

                <div class="form-group">
                  <label for="topic">What can we help you with?</label>
                  <select id="topic" name="topic">
                    <option value="">Select a topic...</option>
                    <option value="volunteer">I want to volunteer</option>
                    <option value="partnership">Partnership inquiry</option>
                    <option value="donation">Donation question</option>
                    <option value="media">Media inquiry</option>
                    <option value="general">General question</option>
                  </select>
                </div>

                <div class="form-group">
                  <label for="message">
                    Message
                    <span aria-hidden="true">*</span>
                    <span class="sr-only">(required)</span>
                  </label>
                  <textarea
                    id="message"
                    name="message"
                    placeholder="Your message..."
                    required
                  ></textarea>
                </div>

                <!-- Cloudflare Turnstile widget -->
                <fieldset
                  class="turnstile-fieldset"
                  style="border: none; padding: 0; margin: 0 0 1rem"
                >
                  <legend class="sr-only">Security verification</legend>
                  <div
                    class="cf-turnstile"
                    data-sitekey="0x4AAAAAACJ4PUuzOaD_Xf63"
                    data-theme="auto"
                  ></div>
                </fieldset>

                <button type="submit" class="btn btn-primary">Send Message</button>
              </form>
            </div>

            <div class="contact-info-panel">
              <h2>Our Service Area</h2>
              <!-- prettier-ignore -->
              <p>Our primary focus is <strong>San Mateo County</strong>, but we serve communities throughout the San Francisco Bay Area.</p>

              <div
                id="bay-area-map"
                role="img"
                aria-label="Map showing Bay Area service region with San Mateo County highlighted"
                style="
                  border-radius: 8px;
                  overflow: hidden;
                  margin: 1.5rem 0;
                  width: 100%;
                  height: 300px;
                "
              ></div>
              <div class="map-description">
                <strong>Counties we serve:</strong>
                San Mateo (primary), Alameda, Contra Costa, Marin, Napa, San Francisco, Santa Clara,
                Santa Cruz, Solano, and Sonoma.
              </div>

              <div class="contact-cta">
                <h3>Want to make an immediate impact?</h3>
                <a href="donate.html" class="btn btn-secondary">Make a Donation</a>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Newsletter Signup -->
      <section class="newsletter">
        <div class="container">
          <div class="newsletter-content">
            <h2>Stay Connected</h2>
            <p>
              Subscribe to our newsletter for updates on events, volunteer opportunities, and
              conservation news.
            </p>
            <!-- Newsletter status announcements -->
            <div id="newsletter-form-status" aria-live="polite" aria-atomic="true"></div>
            <!-- Cloudflare Worker newsletter handler -->
            <form
              class="newsletter-form"
              action="https://forms.baytides.org"
              method="POST"
              id="newsletter-form"
            >
              <input type="hidden" name="form_type" value="newsletter" />
              <input
                type="hidden"
                name="redirect"
                value="https://baytides.org/contact.html?subscribed=true"
              />
              <input
                type="checkbox"
                name="botcheck"
                style="display: none"
                aria-hidden="true"
                tabindex="-1"
              />
              <label for="newsletter-email" class="sr-only">Email address</label>
              <input
                type="email"
                id="newsletter-email"
                name="email"
                placeholder="Enter your email"
                required
                autocomplete="email"
              />
              <button type="submit" class="btn btn-primary">Subscribe</button>
            </form>
          </div>
        </div>
      </section>
    </main>

    <!-- Footer loaded dynamically -->
    <div id="footer-placeholder"></div>

    <script src="assets/js/main.js"></script>
    <script>
      // Initialize Mapbox map with Bay Area counties highlighted
      mapboxgl.accessToken =
        'pk.eyJ1IjoiYmF5dGlkZXMiLCJhIjoiY21qdGt1NjVmNHQ2djNlcHlpa3p0MnViaSJ9.FHuSFIzE8EXe_9Vp5QpM2Q';

      const map = new mapboxgl.Map({
        container: 'bay-area-map',
        style: 'mapbox://styles/mapbox/light-v11',
        center: [-122.1, 37.75],
        zoom: 7.2,
        interactive: false,
      });

      // Bay Area county FIPS codes (state 06 = California)
      const bayAreaCounties = [
        '06001', // Alameda
        '06013', // Contra Costa
        '06041', // Marin
        '06055', // Napa
        '06075', // San Francisco
        '06081', // San Mateo (primary focus)
        '06085', // Santa Clara
        '06087', // Santa Cruz
        '06095', // Solano
        '06097', // Sonoma
      ];

      const sanMateoFIPS = '06081';

      map.on('load', () => {
        // Add county boundaries from Mapbox's built-in data
        map.addSource('counties', {
          type: 'vector',
          url: 'mapbox://mapbox.82pkq93d',
        });

        // Highlight other Bay Area counties with green fill
        map.addLayer(
          {
            id: 'bay-area-fill',
            type: 'fill',
            source: 'counties',
            'source-layer': 'original',
            paint: {
              'fill-color': '#2d6a4f',
              'fill-opacity': 0.3,
            },
            filter: ['all', ['in', 'FIPS', ...bayAreaCounties], ['!=', 'FIPS', sanMateoFIPS]],
          },
          'waterway-label'
        );

        // Highlight San Mateo County with orange fill (primary focus)
        map.addLayer(
          {
            id: 'san-mateo-fill',
            type: 'fill',
            source: 'counties',
            'source-layer': 'original',
            paint: {
              'fill-color': '#e85d04',
              'fill-opacity': 0.45,
            },
            filter: ['==', 'FIPS', sanMateoFIPS],
          },
          'waterway-label'
        );

        // Add county borders for other Bay Area counties
        map.addLayer(
          {
            id: 'bay-area-borders',
            type: 'line',
            source: 'counties',
            'source-layer': 'original',
            paint: {
              'line-color': '#1b4332',
              'line-width': 1.5,
            },
            filter: ['all', ['in', 'FIPS', ...bayAreaCounties], ['!=', 'FIPS', sanMateoFIPS]],
          },
          'waterway-label'
        );

        // Add border for San Mateo County
        map.addLayer(
          {
            id: 'san-mateo-border',
            type: 'line',
            source: 'counties',
            'source-layer': 'original',
            paint: {
              'line-color': '#9d0208',
              'line-width': 2.5,
            },
            filter: ['==', 'FIPS', sanMateoFIPS],
          },
          'waterway-label'
        );
      });
    </script>
  </body>
</html>
