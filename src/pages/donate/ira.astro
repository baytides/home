---
import BaseLayout from '../../layouts/BaseLayout.astro';
import Breadcrumb from '../../components/Breadcrumb.astro';

const structuredData = [
  {
    '@context': 'https://schema.org',
    '@type': 'WebPage',
    name: 'IRA Charitable Rollover (QCD)',
    description:
      'Donate directly from your IRA to Bay Tides tax-free with a Qualified Charitable Distribution.',
    url: 'https://baytides.org/donate/ira',
  },
  {
    '@context': 'https://schema.org',
    '@type': 'BreadcrumbList',
    itemListElement: [
      { '@type': 'ListItem', position: 1, name: 'Home', item: 'https://baytides.org/' },
      { '@type': 'ListItem', position: 2, name: 'Donate', item: 'https://baytides.org/donate' },
      { '@type': 'ListItem', position: 3, name: 'IRA Charitable Rollover' },
    ],
  },
];
---

<BaseLayout
  title="IRA Charitable Rollover (QCD)"
  description="If you're 70½ or older, you can donate directly from your IRA to Bay Tides tax-free. Learn about Qualified Charitable Distributions and how they can benefit you."
  canonicalUrl="https://baytides.org/donate/ira"
  structuredData={structuredData}
>
  <Breadcrumb
    items={[
      { label: 'Home', href: '/' },
      { label: 'Donate', href: '/donate' },
      { label: 'IRA Charitable Rollover' },
    ]}
  />

  <section class="hero hero-page">
    <div class="container">
      <h1>IRA Charitable Rollover</h1>
      <p>Give directly from your IRA and reduce your taxable income</p>
    </div>
  </section>

  <section class="content-section">
    <div class="container">
      <div class="ira-content">
        <div class="ira-intro">
          <h2>What is a Qualified Charitable Distribution?</h2>
          <p>
            A Qualified Charitable Distribution (QCD), also known as an IRA charitable rollover,
            allows individuals aged 70½ or older to donate up to $111,000 per year directly from
            their IRA to qualified charities like Bay Tides. The transfer is tax-free and can count
            toward your Required Minimum Distribution (RMD).
          </p>
        </div>

        <div class="ira-benefits-compact">
          <h3>Key Benefits</h3>
          <div class="benefits-list">
            <div class="benefit-compact">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <line x1="12" y1="1" x2="12" y2="23"></line><path
                  d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"
                >
                </path>
              </svg>
              <div class="benefit-text">
                <strong>Tax-Free Transfer</strong>
                <span>Excluded from taxable income</span>
              </div>
            </div>
            <div class="benefit-compact">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <polyline points="9 11 12 14 22 4"></polyline><path
                  d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"
                >
                </path>
              </svg>
              <div class="benefit-text">
                <strong>Satisfies RMD</strong>
                <span>Counts toward Required Minimum Distribution</span>
              </div>
            </div>
            <div class="benefit-compact">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
              </svg>
              <div class="benefit-text">
                <strong>Lower AGI</strong>
                <span>May reduce Medicare premiums & SS taxes</span>
              </div>
            </div>
            <div class="benefit-compact">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line
                  x1="16"
                  y1="2"
                  x2="16"
                  y2="6"
                >
                </line><line x1="8" y1="2" x2="8" y2="6"></line><line
                  x1="3"
                  y1="10"
                  x2="21"
                  y2="10"
                >
                </line>
              </svg>
              <div class="benefit-text">
                <strong>No Itemizing Required</strong>
                <span>Works with standard deduction</span>
              </div>
            </div>
          </div>
        </div>

        <div class="rmd-calculator">
          <div class="calculator-header">
            <div class="calculator-icon">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="32"
                height="32"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <rect x="4" y="2" width="16" height="20" rx="2"></rect>
                <line x1="8" y1="6" x2="16" y2="6"></line>
                <line x1="8" y1="10" x2="10" y2="10"></line>
                <line x1="12" y1="10" x2="14" y2="10"></line>
                <line x1="8" y1="14" x2="10" y2="14"></line>
                <line x1="12" y1="14" x2="14" y2="14"></line>
                <line x1="8" y1="18" x2="10" y2="18"></line>
                <line x1="12" y1="18" x2="16" y2="18"></line>
              </svg>
            </div>
            <div class="calculator-title">
              <h3>RMD Calculator</h3>
              <p>Estimate your Required Minimum Distribution</p>
            </div>
          </div>

          <div class="calculator-form">
            <div class="form-row">
              <div class="form-group">
                <label for="account-balance">
                  Previous Year-End Account Balance
                  <span class="required">*</span>
                </label>
                <div class="input-wrapper currency-input">
                  <span class="currency-symbol">$</span>
                  <input
                    type="text"
                    id="account-balance"
                    placeholder="0"
                    inputmode="numeric"
                    aria-describedby="balance-help"
                  />
                </div>
                <small id="balance-help">Your IRA balance as of December 31 of last year</small>
              </div>

              <div class="form-group">
                <label for="age-select">
                  Your Age at Year-End
                  <span class="required">*</span>
                </label>
                <select id="age-select" aria-describedby="age-help">
                  <option value="">Select your age</option>
                  <option value="73">73</option>
                  <option value="74">74</option>
                  <option value="75">75</option>
                  <option value="76">76</option>
                  <option value="77">77</option>
                  <option value="78">78</option>
                  <option value="79">79</option>
                  <option value="80">80</option>
                  <option value="81">81</option>
                  <option value="82">82</option>
                  <option value="83">83</option>
                  <option value="84">84</option>
                  <option value="85">85</option>
                  <option value="86">86</option>
                  <option value="87">87</option>
                  <option value="88">88</option>
                  <option value="89">89</option>
                  <option value="90">90</option>
                  <option value="91">91</option>
                  <option value="92">92</option>
                  <option value="93">93</option>
                  <option value="94">94</option>
                  <option value="95">95</option>
                  <option value="96">96</option>
                  <option value="97">97</option>
                  <option value="98">98</option>
                  <option value="99">99</option>
                  <option value="100">100</option>
                  <option value="101">101</option>
                  <option value="102">102</option>
                  <option value="103">103</option>
                  <option value="104">104</option>
                  <option value="105">105</option>
                  <option value="106">106</option>
                  <option value="107">107</option>
                  <option value="108">108</option>
                  <option value="109">109</option>
                  <option value="110">110</option>
                  <option value="111">111</option>
                  <option value="112">112</option>
                  <option value="113">113</option>
                  <option value="114">114</option>
                  <option value="115">115</option>
                  <option value="116">116</option>
                  <option value="117">117</option>
                  <option value="118">118</option>
                  <option value="119">119</option>
                  <option value="120">120+</option>
                </select>
                <small id="age-help">Your age at the end of this year</small>
              </div>
            </div>

            <div class="calculator-actions">
              <button type="button" id="calculate-rmd" class="btn btn-primary">
                Calculate RMD
              </button>
              <button type="button" id="reset-calculator" class="btn btn-secondary">Reset</button>
            </div>
          </div>

          <div id="rmd-result" class="calculator-result" hidden>
            <div class="result-card">
              <div class="result-label">Your Estimated RMD</div>
              <div class="result-amount" id="rmd-amount">$0</div>
              <div class="result-details">
                <p>
                  Based on a balance of <strong id="result-balance">$0</strong> and age <strong
                    id="result-age"
                  >
                    0
                  </strong>, using the IRS Uniform Lifetime Table (distribution period: <span
                    id="result-period"
                  >
                    0
                  </span> years).
                </p>
              </div>
            </div>

            <div class="qcd-suggestion">
              <div class="suggestion-icon">
                <svg
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path
                    d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"
                  >
                  </path>
                </svg>
              </div>
              <div class="suggestion-content">
                <strong>Consider a QCD!</strong>
                <p>
                  You could satisfy your RMD by donating up to
                  <strong id="qcd-max">$0</strong> directly to Bay Tides tax-free. This counts toward
                  your RMD without increasing your taxable income.
                </p>
              </div>
            </div>
          </div>

          <div class="calculator-description">
            <p>
              Use this calculator to determine how much money you need to take out of your
              traditional IRA or 401(k) account this year.
            </p>
          </div>

          <div class="calculator-disclaimer">
            <svg
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <circle cx="12" cy="12" r="10"></circle>
              <line x1="12" y1="16" x2="12" y2="12"></line>
              <line x1="12" y1="8" x2="12.01" y2="8"></line>
            </svg>
            <p>
              <strong>Note:</strong> If your spouse is <em>
                more than ten years younger than you
              </em>, please review
              <a
                href="https://www.irs.gov/publications/p590b"
                target="_blank"
                rel="noopener noreferrer"
              >
                IRS Publication 590-B
              </a> to calculate your RMD using the Joint Life and Last Survivor Expectancy Table. This
              calculator uses the Uniform Lifetime Table and provides estimates only. Please consult your
              tax advisor for personalized guidance.
            </p>
          </div>
        </div>

        <div class="tax-comparison">
          <h3>Cash Donation vs. QCD: See the Tax Difference</h3>
          <p class="comparison-intro">
            Taking your full RMD and then donating cash could result in a higher tax bill than
            giving through a QCD. See how different filers can benefit:
          </p>

          <div
            class="example-carousel"
            role="region"
            aria-roledescription="carousel"
            aria-label="Tax comparison examples for different filer types"
          >
            <div class="visually-hidden" aria-live="polite" aria-atomic="true" id="carousel-status">
            </div>
            <button
              class="carousel-arrow carousel-prev"
              aria-label="Previous example: Go to previous tax scenario"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                aria-hidden="true"
              >
                <path d="m15 18-6-6 6-6"></path>
              </svg>
            </button>

            <div class="carousel-container">
              <div class="carousel-track" role="group" aria-label="Tax scenarios">
                <!-- Slide 1: Single Filer -->
                <div
                  class="carousel-slide active"
                  data-slide="0"
                  role="tabpanel"
                  aria-roledescription="slide"
                  aria-label="Slide 1 of 4: Single Filer example"
                  id="carousel-slide-0"
                >
                  <div class="slide-label" aria-hidden="true">Single Filer</div>
                  <div class="scenario-description">
                    <p>
                      <strong>Meet Sarah:</strong> She's 76 years old and single, with $108,000 in Social
                      Security, pension, and retirement income. Her IRA requires an RMD of $18,000. She
                      wants to donate $5,000 to Bay Tides.
                    </p>
                  </div>

                  <div class="comparison-grid">
                    <div class="scenario-card scenario-cash">
                      <div class="scenario-header">
                        <span class="scenario-number">Option 1</span>
                        <h4>Take RMD + Donate Cash</h4>
                      </div>
                      <div class="scenario-body">
                        <div class="calculation-row">
                          <span class="calc-label">Social Security & pension</span>
                          <span class="calc-value">$108,000</span>
                        </div>
                        <div class="calculation-row">
                          <span class="calc-label">RMD (fully taxable)</span>
                          <span class="calc-value add">+ $18,000</span>
                        </div>
                        <div class="calculation-row">
                          <span class="calc-label">QCD</span>
                          <span class="calc-value neutral">$0</span>
                        </div>
                        <div class="calculation-row subtotal">
                          <span class="calc-label">Adjusted Gross Income</span>
                          <span class="calc-value">= $126,000</span>
                        </div>
                        <div class="calculation-row">
                          <span class="calc-label">Standard deduction*</span>
                          <span class="calc-value subtract">– $18,150</span>
                        </div>
                        <div class="calculation-row total">
                          <span class="calc-label">Taxable Income</span>
                          <span class="calc-value highlight-bad">= $107,850</span>
                        </div>
                        <div class="calculation-row bracket">
                          <span class="calc-label">Tax bracket</span>
                          <span class="calc-value bracket-bad">24%</span>
                        </div>
                      </div>
                    </div>

                    <div class="scenario-vs"><span>VS</span></div>

                    <div class="scenario-card scenario-qcd">
                      <div class="scenario-header">
                        <span class="scenario-number">Option 2</span>
                        <h4>Donate $5,000 via QCD</h4>
                        <span class="recommended-badge">Better</span>
                      </div>
                      <div class="scenario-body">
                        <div class="calculation-row">
                          <span class="calc-label">Social Security & pension</span>
                          <span class="calc-value">$108,000</span>
                        </div>
                        <div class="calculation-row">
                          <span class="calc-label">RMD</span>
                          <span class="calc-value add">+ $18,000</span>
                        </div>
                        <div class="calculation-row">
                          <span class="calc-label">QCD to Bay Tides</span>
                          <span class="calc-value subtract">– $5,000</span>
                        </div>
                        <div class="calculation-row subtotal">
                          <span class="calc-label">Adjusted Gross Income</span>
                          <span class="calc-value">= $121,000</span>
                        </div>
                        <div class="calculation-row">
                          <span class="calc-label">Standard deduction*</span>
                          <span class="calc-value subtract">– $18,150</span>
                        </div>
                        <div class="calculation-row total">
                          <span class="calc-label">Taxable Income</span>
                          <span class="calc-value highlight-good">= $102,850</span>
                        </div>
                        <div class="calculation-row bracket">
                          <span class="calc-label">Tax bracket</span>
                          <span class="calc-value bracket-good">22%</span>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="savings-highlight">
                    <div class="savings-icon">
                      <svg
                        width="24"
                        height="24"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                      >
                        <path d="M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
                      </svg>
                    </div>
                    <div class="savings-content">
                      <strong>Sarah drops from 24% to 22% tax bracket</strong>
                      <span>
                        $5,000 lower taxable income + potential Medicare & Social Security savings
                      </span>
                    </div>
                  </div>
                </div>

                <!-- Slide 2: Married Filing Jointly -->
                <div
                  class="carousel-slide"
                  data-slide="1"
                  role="tabpanel"
                  aria-roledescription="slide"
                  aria-label="Slide 2 of 4: Married Filing Jointly example"
                  id="carousel-slide-1"
                  aria-hidden="true"
                >
                  <div class="slide-label" aria-hidden="true">Married Filing Jointly</div>
                  <div class="scenario-description">
                    <p>
                      <strong>Meet Tom & Linda:</strong> Both 77, they have $218,000 in combined retirement
                      income. Their RMD is $30,000. They want to donate $10,000 to Bay Tides.
                    </p>
                  </div>

                  <div class="comparison-grid">
                    <div class="scenario-card scenario-cash">
                      <div class="scenario-header">
                        <span class="scenario-number">Option 1</span>
                        <h4>Take RMD + Donate Cash</h4>
                      </div>
                      <div class="scenario-body">
                        <div class="calculation-row">
                          <span class="calc-label">Combined retirement income</span>
                          <span class="calc-value">$218,000</span>
                        </div>
                        <div class="calculation-row">
                          <span class="calc-label">RMD (fully taxable)</span>
                          <span class="calc-value add">+ $30,000</span>
                        </div>
                        <div class="calculation-row">
                          <span class="calc-label">QCD</span>
                          <span class="calc-value neutral">$0</span>
                        </div>
                        <div class="calculation-row subtotal">
                          <span class="calc-label">Adjusted Gross Income</span>
                          <span class="calc-value">= $248,000</span>
                        </div>
                        <div class="calculation-row">
                          <span class="calc-label">Standard deduction*</span>
                          <span class="calc-value subtract">– $35,400</span>
                        </div>
                        <div class="calculation-row total">
                          <span class="calc-label">Taxable Income</span>
                          <span class="calc-value highlight-bad">= $212,600</span>
                        </div>
                        <div class="calculation-row bracket">
                          <span class="calc-label">Tax bracket</span>
                          <span class="calc-value bracket-bad">24%</span>
                        </div>
                      </div>
                    </div>

                    <div class="scenario-vs"><span>VS</span></div>

                    <div class="scenario-card scenario-qcd">
                      <div class="scenario-header">
                        <span class="scenario-number">Option 2</span>
                        <h4>Donate $10,000 via QCD</h4>
                        <span class="recommended-badge">Better</span>
                      </div>
                      <div class="scenario-body">
                        <div class="calculation-row">
                          <span class="calc-label">Combined retirement income</span>
                          <span class="calc-value">$218,000</span>
                        </div>
                        <div class="calculation-row">
                          <span class="calc-label">RMD</span>
                          <span class="calc-value add">+ $30,000</span>
                        </div>
                        <div class="calculation-row">
                          <span class="calc-label">QCD to Bay Tides</span>
                          <span class="calc-value subtract">– $10,000</span>
                        </div>
                        <div class="calculation-row subtotal">
                          <span class="calc-label">Adjusted Gross Income</span>
                          <span class="calc-value">= $238,000</span>
                        </div>
                        <div class="calculation-row">
                          <span class="calc-label">Standard deduction*</span>
                          <span class="calc-value subtract">– $35,400</span>
                        </div>
                        <div class="calculation-row total">
                          <span class="calc-label">Taxable Income</span>
                          <span class="calc-value highlight-good">= $202,600</span>
                        </div>
                        <div class="calculation-row bracket">
                          <span class="calc-label">Tax bracket</span>
                          <span class="calc-value bracket-good">22%</span>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="savings-highlight">
                    <div class="savings-icon">
                      <svg
                        width="24"
                        height="24"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                      >
                        <path d="M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
                      </svg>
                    </div>
                    <div class="savings-content">
                      <strong>Tom & Linda drop from 24% to 22% tax bracket</strong>
                      <span>$10,000 lower taxable income + potential IRMAA savings</span>
                    </div>
                  </div>
                </div>

                <!-- Slide 3: Higher Income Single -->
                <div
                  class="carousel-slide"
                  data-slide="2"
                  role="tabpanel"
                  aria-roledescription="slide"
                  aria-label="Slide 3 of 4: Higher Income Single example"
                  id="carousel-slide-2"
                  aria-hidden="true"
                >
                  <div class="slide-label" aria-hidden="true">Higher Income Single</div>
                  <div class="scenario-description">
                    <p>
                      <strong>Meet Robert:</strong> He's 78 and single with $195,000 in retirement income.
                      His RMD is $30,000. He wants to make a larger $15,000 gift to Bay Tides.
                    </p>
                  </div>

                  <div class="comparison-grid">
                    <div class="scenario-card scenario-cash">
                      <div class="scenario-header">
                        <span class="scenario-number">Option 1</span>
                        <h4>Take RMD + Donate Cash</h4>
                      </div>
                      <div class="scenario-body">
                        <div class="calculation-row">
                          <span class="calc-label">Retirement income</span>
                          <span class="calc-value">$195,000</span>
                        </div>
                        <div class="calculation-row">
                          <span class="calc-label">RMD (fully taxable)</span>
                          <span class="calc-value add">+ $30,000</span>
                        </div>
                        <div class="calculation-row">
                          <span class="calc-label">QCD</span>
                          <span class="calc-value neutral">$0</span>
                        </div>
                        <div class="calculation-row subtotal">
                          <span class="calc-label">Adjusted Gross Income</span>
                          <span class="calc-value">= $225,000</span>
                        </div>
                        <div class="calculation-row">
                          <span class="calc-label">Standard deduction*</span>
                          <span class="calc-value subtract">– $18,150</span>
                        </div>
                        <div class="calculation-row total">
                          <span class="calc-label">Taxable Income</span>
                          <span class="calc-value highlight-bad">= $206,850</span>
                        </div>
                        <div class="calculation-row bracket">
                          <span class="calc-label">Tax bracket</span>
                          <span class="calc-value bracket-bad">32%</span>
                        </div>
                      </div>
                    </div>

                    <div class="scenario-vs"><span>VS</span></div>

                    <div class="scenario-card scenario-qcd">
                      <div class="scenario-header">
                        <span class="scenario-number">Option 2</span>
                        <h4>Donate $15,000 via QCD</h4>
                        <span class="recommended-badge">Better</span>
                      </div>
                      <div class="scenario-body">
                        <div class="calculation-row">
                          <span class="calc-label">Retirement income</span>
                          <span class="calc-value">$195,000</span>
                        </div>
                        <div class="calculation-row">
                          <span class="calc-label">RMD</span>
                          <span class="calc-value add">+ $30,000</span>
                        </div>
                        <div class="calculation-row">
                          <span class="calc-label">QCD to Bay Tides</span>
                          <span class="calc-value subtract">– $15,000</span>
                        </div>
                        <div class="calculation-row subtotal">
                          <span class="calc-label">Adjusted Gross Income</span>
                          <span class="calc-value">= $210,000</span>
                        </div>
                        <div class="calculation-row">
                          <span class="calc-label">Standard deduction*</span>
                          <span class="calc-value subtract">– $18,150</span>
                        </div>
                        <div class="calculation-row total">
                          <span class="calc-label">Taxable Income</span>
                          <span class="calc-value highlight-good">= $191,850</span>
                        </div>
                        <div class="calculation-row bracket">
                          <span class="calc-label">Tax bracket</span>
                          <span class="calc-value bracket-good">24%</span>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="savings-highlight">
                    <div class="savings-icon">
                      <svg
                        width="24"
                        height="24"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                      >
                        <path d="M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
                      </svg>
                    </div>
                    <div class="savings-content">
                      <strong>Robert drops from 32% to 24% tax bracket</strong>
                      <span>$15,000 lower taxable income + significant marginal rate savings</span>
                    </div>
                  </div>
                </div>

                <!-- Slide 4: Lower Income -->
                <div
                  class="carousel-slide"
                  data-slide="3"
                  role="tabpanel"
                  aria-roledescription="slide"
                  aria-label="Slide 4 of 4: Lower Income example"
                  id="carousel-slide-3"
                  aria-hidden="true"
                >
                  <div class="slide-label" aria-hidden="true">Lower Income</div>
                  <div class="scenario-description">
                    <p>
                      <strong>Meet Dorothy:</strong> She's 90 years old and single, living on $50,000
                      from Social Security and a small pension. Her RMD is $20,000. She wants to give
                      $1,500 to Bay Tides.
                    </p>
                  </div>

                  <div class="comparison-grid">
                    <div class="scenario-card scenario-cash">
                      <div class="scenario-header">
                        <span class="scenario-number">Option 1</span>
                        <h4>Take RMD + Donate Cash</h4>
                      </div>
                      <div class="scenario-body">
                        <div class="calculation-row">
                          <span class="calc-label">Social Security & pension</span>
                          <span class="calc-value">$50,000</span>
                        </div>
                        <div class="calculation-row">
                          <span class="calc-label">RMD (fully taxable)</span>
                          <span class="calc-value add">+ $20,000</span>
                        </div>
                        <div class="calculation-row">
                          <span class="calc-label">QCD</span>
                          <span class="calc-value neutral">$0</span>
                        </div>
                        <div class="calculation-row subtotal">
                          <span class="calc-label">Adjusted Gross Income</span>
                          <span class="calc-value">= $70,000</span>
                        </div>
                        <div class="calculation-row">
                          <span class="calc-label">Standard deduction*</span>
                          <span class="calc-value subtract">– $18,150</span>
                        </div>
                        <div class="calculation-row total">
                          <span class="calc-label">Taxable Income</span>
                          <span class="calc-value highlight-bad">= $51,850</span>
                        </div>
                        <div class="calculation-row bracket">
                          <span class="calc-label">Tax bracket</span>
                          <span class="calc-value bracket-bad">22%</span>
                        </div>
                      </div>
                    </div>

                    <div class="scenario-vs"><span>VS</span></div>

                    <div class="scenario-card scenario-qcd">
                      <div class="scenario-header">
                        <span class="scenario-number">Option 2</span>
                        <h4>Donate $1,500 via QCD</h4>
                        <span class="recommended-badge">Better</span>
                      </div>
                      <div class="scenario-body">
                        <div class="calculation-row">
                          <span class="calc-label">Social Security & pension</span>
                          <span class="calc-value">$50,000</span>
                        </div>
                        <div class="calculation-row">
                          <span class="calc-label">RMD</span>
                          <span class="calc-value add">+ $20,000</span>
                        </div>
                        <div class="calculation-row">
                          <span class="calc-label">QCD to Bay Tides</span>
                          <span class="calc-value subtract">– $1,500</span>
                        </div>
                        <div class="calculation-row subtotal">
                          <span class="calc-label">Adjusted Gross Income</span>
                          <span class="calc-value">= $68,500</span>
                        </div>
                        <div class="calculation-row">
                          <span class="calc-label">Standard deduction*</span>
                          <span class="calc-value subtract">– $18,150</span>
                        </div>
                        <div class="calculation-row total">
                          <span class="calc-label">Taxable Income</span>
                          <span class="calc-value highlight-good">= $50,350</span>
                        </div>
                        <div class="calculation-row bracket">
                          <span class="calc-label">Tax bracket</span>
                          <span class="calc-value bracket-good">12%</span>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="savings-highlight">
                    <div class="savings-icon">
                      <svg
                        width="24"
                        height="24"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                      >
                        <path d="M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
                      </svg>
                    </div>
                    <div class="savings-content">
                      <strong>Dorothy drops from 22% to 12% tax bracket</strong>
                      <span>Even a small $1,500 gift can make a big difference!</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <button
              class="carousel-arrow carousel-next"
              aria-label="Next example: Go to next tax scenario"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                aria-hidden="true"
              >
                <path d="m9 18 6-6-6-6"></path>
              </svg>
            </button>

            <div class="carousel-dots" role="tablist" aria-label="Choose a tax scenario example">
              <button
                class="carousel-dot active"
                data-slide="0"
                role="tab"
                aria-selected="true"
                aria-controls="carousel-slide-0"
                aria-label="View Single Filer example (Slide 1 of 4)"
              >
              </button>
              <button
                class="carousel-dot"
                data-slide="1"
                role="tab"
                aria-selected="false"
                aria-controls="carousel-slide-1"
                aria-label="View Married Filing Jointly example (Slide 2 of 4)"
              >
              </button>
              <button
                class="carousel-dot"
                data-slide="2"
                role="tab"
                aria-selected="false"
                aria-controls="carousel-slide-2"
                aria-label="View Higher Income example (Slide 3 of 4)"
              >
              </button>
              <button
                class="carousel-dot"
                data-slide="3"
                role="tab"
                aria-selected="false"
                aria-controls="carousel-slide-3"
                aria-label="View Lower Income example (Slide 4 of 4)"
              >
              </button>
            </div>
          </div>

          <div class="comparison-footnotes">
            <p>
              * 2026 standard deduction: Single 65+ = $18,150; MFJ both 65+ = $35,400. Tax brackets:
              Single 24% begins at $105,700, 32% at $201,775; MFJ 24% begins at $211,400.
            </p>
            <p class="disclaimer-note">
              These hypothetical examples are for illustrative purposes only and are not intended as
              tax advice. Consult your tax professional for personalized guidance.
            </p>
          </div>
        </div>

        <div class="ira-requirements">
          <h3>Requirements</h3>
          <ul>
            <li>You must be <strong>age 70½ or older</strong> at the time of the distribution</li>
            <li>
              The gift must be transferred <strong>directly from your IRA</strong> to Bay Tides (not to
              you first)
            </li>
            <li>
              Maximum of <strong>$111,000 per person per year</strong> (2026 limit, adjusted annually
              for inflation)
            </li>
            <li>
              Must come from a <strong>traditional IRA or Roth IRA</strong> (not 401(k), 403(b), or pension
              plans)
            </li>
            <li>
              You <strong>cannot receive any goods or services</strong> in exchange for the gift
            </li>
          </ul>
        </div>

        <div class="ira-steps">
          <h3>How to Make a QCD</h3>
          <ol role="list">
            <li>
              <strong>Contact your IRA administrator</strong> and request a Qualified Charitable Distribution
              to Bay Tides.
              <details class="provider-accordion">
                <summary>
                  <!-- Lucide: chevron-right -->
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="16"
                    height="16"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    class="chevron-icon"
                  >
                    <path d="m9 18 6-6-6-6"></path>
                  </svg>
                  Quick links to IRA providers
                </summary>
                <div class="provider-accordion-content">
                  <div class="provider-section">
                    <h5>IRA Custodians</h5>
                    <div class="provider-list">
                      <a
                        href="https://www.schwab.com?utm_source=baytides&utm_medium=referral&utm_campaign=ira_qcd"
                        target="_blank"
                        rel="noopener noreferrer"
                      >
                        Charles Schwab
                      </a>
                      <a
                        href="https://www.fidelity.com?utm_source=baytides&utm_medium=referral&utm_campaign=ira_qcd"
                        target="_blank"
                        rel="noopener noreferrer"
                      >
                        Fidelity
                      </a>
                      <a
                        href="https://investor.vanguard.com?utm_source=baytides&utm_medium=referral&utm_campaign=ira_qcd"
                        target="_blank"
                        rel="noopener noreferrer"
                      >
                        Vanguard
                      </a>
                    </div>
                  </div>
                  <div class="provider-section">
                    <h5>National Advisors</h5>
                    <div class="provider-list">
                      <a
                        href="https://advisor.morganstanley.com/the-san-francisco-wealth-management-group?utm_source=baytides&utm_medium=referral&utm_campaign=ira_qcd"
                        target="_blank"
                        rel="noopener noreferrer"
                      >
                        Morgan Stanley
                      </a>
                      <a
                        href="https://privatebank.jpmorgan.com/nam/en/locations/united-states/california/san-francisco?utm_source=baytides&utm_medium=referral&utm_campaign=ira_qcd"
                        target="_blank"
                        rel="noopener noreferrer"
                      >
                        J.P. Morgan
                      </a>
                      <a
                        href="https://local.ubs.com/san-francisco-pwm/?utm_source=baytides&utm_medium=referral&utm_campaign=ira_qcd"
                        target="_blank"
                        rel="noopener noreferrer"
                      >
                        UBS
                      </a>
                      <a
                        href="https://www.bessemertrust.com/wealth-management-san-francisco?utm_source=baytides&utm_medium=referral&utm_campaign=ira_qcd"
                        target="_blank"
                        rel="noopener noreferrer"
                      >
                        Bessemer Trust
                      </a>
                      <a
                        href="https://evercorewealthandtrust.com?utm_source=baytides&utm_medium=referral&utm_campaign=ira_qcd"
                        target="_blank"
                        rel="noopener noreferrer"
                      >
                        Evercore
                      </a>
                      <a
                        href="https://aspiriant.com/locations/san-francisco/?utm_source=baytides&utm_medium=referral&utm_campaign=ira_qcd"
                        target="_blank"
                        rel="noopener noreferrer"
                      >
                        Aspiriant
                      </a>
                      <a
                        href="https://www.marinerwealthadvisors.com/locations/san-francisco-bay-area/?utm_source=baytides&utm_medium=referral&utm_campaign=ira_qcd"
                        target="_blank"
                        rel="noopener noreferrer"
                      >
                        Mariner Wealth
                      </a>
                      <a
                        href="https://www.merceradvisors.com?utm_source=baytides&utm_medium=referral&utm_campaign=ira_qcd"
                        target="_blank"
                        rel="noopener noreferrer"
                      >
                        Mercer Advisors
                      </a>
                    </div>
                  </div>
                  <div class="provider-section">
                    <h5>Bay Area Advisors</h5>
                    <div class="provider-list">
                      <a
                        href="https://iconiqcapital.com?utm_source=baytides&utm_medium=referral&utm_campaign=ira_qcd"
                        target="_blank"
                        rel="noopener noreferrer"
                      >
                        Iconiq Capital
                      </a>
                      <a
                        href="https://www.hallcapital.com?utm_source=baytides&utm_medium=referral&utm_campaign=ira_qcd"
                        target="_blank"
                        rel="noopener noreferrer"
                      >
                        Hall Capital
                      </a>
                      <a
                        href="https://cressetcapital.com?utm_source=baytides&utm_medium=referral&utm_campaign=ira_qcd"
                        target="_blank"
                        rel="noopener noreferrer"
                      >
                        Cresset
                      </a>
                      <a
                        href="https://kayne.com?utm_source=baytides&utm_medium=referral&utm_campaign=ira_qcd"
                        target="_blank"
                        rel="noopener noreferrer"
                      >
                        Kayne Anderson
                      </a>
                    </div>
                  </div>
                  <p class="provider-note">
                    Don't see your provider? Contact them directly to request a QCD.
                  </p>
                </div>
              </details>
            </li>
            <li>
              <strong>Provide our information:</strong>
              <ul>
                <li>Legal Name: Bay Tides</li>
                <li>EIN: 93-3889081</li>
                <li>Address: 274 Redwood Shores Pkwy #619, Redwood City, CA 94065</li>
              </ul>
            </li>
            <li>
              <strong>Specify the amount</strong> you wish to donate (up to $111,000).
            </li>
            <li>
              <strong>Notify us</strong> that a QCD is coming so we can properly acknowledge your gift.
            </li>
          </ol>
        </div>

        <div class="ira-note">
          <h3>Important Note</h3>
          <p>
            Because QCDs are tax-free transfers, you cannot also claim a charitable deduction for
            the same gift. However, for many donors, the tax exclusion from income is more valuable
            than an itemized deduction would be.
          </p>
          <p>
            We recommend consulting with your tax advisor to determine if a QCD is the best giving
            strategy for your situation.
          </p>
        </div>

        <div class="ira-cta">
          <h3>Ready to Give?</h3>
          <p>Contact us for assistance or to let us know a QCD is on its way.</p>
          <a href="/contact" class="btn btn-primary btn-large">Contact Us</a>
        </div>
      </div>
    </div>
  </section>
</BaseLayout>

<style>
  /* Accessibility utility */
  .visually-hidden {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
  }

  .ira-content {
    max-width: 900px;
    margin: 0 auto;
  }

  .ira-intro {
    margin-bottom: 3rem;
    text-align: center;
  }

  .ira-intro h2 {
    margin-bottom: 1.5rem;
  }

  .ira-intro p {
    font-size: 1.125rem;
    line-height: 1.8;
    color: var(--text-light);
    max-width: 750px;
    margin: 0 auto;
  }

  .ira-benefits-compact {
    margin-bottom: 2rem;
  }

  .ira-benefits-compact h3 {
    margin-bottom: 1rem;
    color: var(--primary-navy);
    font-size: 1.25rem;
  }

  .benefits-list {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 0.75rem;
  }

  .benefit-compact {
    display: flex;
    align-items: flex-start;
    gap: 0.75rem;
    padding: 0.75rem 1rem;
    background: var(--light-blue);
    border-radius: 8px;
  }

  .benefit-compact svg {
    flex-shrink: 0;
    color: var(--primary-navy);
    margin-top: 2px;
  }

  .benefit-text {
    display: flex;
    flex-direction: column;
    gap: 0.125rem;
  }

  .benefit-text strong {
    color: var(--primary-navy);
    font-size: 0.9375rem;
    font-weight: 600;
  }

  .benefit-text span {
    font-size: 0.8125rem;
    color: var(--text-light);
    line-height: 1.4;
  }

  .ira-requirements {
    background: var(--cream);
    border-radius: 12px;
    padding: 2rem;
    margin-bottom: 3rem;
  }

  .ira-requirements h3 {
    margin-bottom: 1.5rem;
    color: var(--primary-navy);
  }

  .ira-requirements ul {
    list-style: none;
    padding: 0;
    margin: 0;
  }

  .ira-requirements li {
    padding: 0.75rem 0;
    padding-left: 2rem;
    position: relative;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  }

  .ira-requirements li:last-child {
    border-bottom: none;
  }

  .ira-requirements li::before {
    content: '';
    position: absolute;
    left: 0;
    top: 1.1rem;
    width: 8px;
    height: 8px;
    background: var(--primary-navy);
    border-radius: 50%;
  }

  .ira-steps {
    margin-bottom: 3rem;
  }

  .ira-steps h3 {
    margin-bottom: 1.5rem;
    color: var(--primary-navy);
  }

  .ira-steps ol {
    list-style: none;
    padding: 0;
    counter-reset: steps;
  }

  .ira-steps li {
    counter-increment: steps;
    padding: 1rem 0 1rem 3.5rem;
    position: relative;
    border-bottom: 1px solid var(--border-color, #e2e8f0);
  }

  .ira-steps li:last-child {
    border-bottom: none;
  }

  .ira-steps li::before {
    content: counter(steps);
    position: absolute;
    left: 0;
    top: 1rem;
    width: 2rem;
    height: 2rem;
    background: var(--primary-navy);
    color: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 600;
    font-size: 0.875rem;
  }

  .ira-steps li ul {
    margin: 0.75rem 0 0 1rem;
    list-style: disc;
  }

  .ira-steps li ul li {
    padding: 0.25rem 0;
    border-bottom: none;
  }

  .ira-steps li ul li::before {
    display: none;
  }

  .ira-note {
    background: #fff8e6;
    border-radius: 12px;
    padding: 2rem;
    margin-bottom: 3rem;
    border-left: 4px solid #f6ad55;
  }

  .ira-note h3 {
    margin-bottom: 1rem;
    color: var(--primary-navy);
  }

  .ira-note p {
    margin-bottom: 1rem;
    line-height: 1.7;
  }

  .ira-note p:last-child {
    margin-bottom: 0;
  }

  .ira-cta {
    text-align: center;
    padding: 2rem 0;
    border-top: 1px solid var(--border-color, #e2e8f0);
  }

  .ira-cta h3 {
    margin-bottom: 0.75rem;
    color: var(--primary-navy);
  }

  .ira-cta p {
    margin-bottom: 1.5rem;
    color: var(--text-light);
  }

  /* Provider Accordion in Steps */
  .provider-accordion {
    margin-top: 0.75rem;
    border: 1px solid #e2e8f0;
    border-radius: 8px;
    background: #f8fafc;
  }

  .provider-accordion summary {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.75rem 1rem;
    cursor: pointer;
    font-size: 0.875rem;
    font-weight: 500;
    color: var(--primary-blue);
    list-style: none;
  }

  .provider-accordion summary::-webkit-details-marker {
    display: none;
  }

  .provider-accordion summary .chevron-icon {
    transition: transform 0.2s;
    flex-shrink: 0;
  }

  .provider-accordion[open] summary .chevron-icon {
    transform: rotate(90deg);
  }

  .provider-accordion summary:hover {
    background: rgba(43, 108, 176, 0.05);
  }

  .provider-accordion-content {
    padding: 0 1rem 1rem;
  }

  .provider-section {
    margin-bottom: 1rem;
  }

  .provider-section:last-of-type {
    margin-bottom: 0.5rem;
  }

  .provider-section h5 {
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--text-light);
    margin: 0 0 0.5rem;
    font-weight: 600;
  }

  .provider-list {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
  }

  .provider-list a {
    display: inline-block;
    padding: 0.375rem 0.75rem;
    background: #fff;
    border: 1px solid #e2e8f0;
    border-radius: 6px;
    font-size: 0.8125rem;
    color: var(--primary-navy);
    text-decoration: none;
    transition: all 0.15s;
  }

  .provider-list a:hover {
    border-color: var(--primary-blue);
    color: var(--primary-blue);
    background: rgba(43, 108, 176, 0.05);
  }

  .provider-note {
    font-size: 0.75rem;
    color: var(--text-light);
    margin: 0;
    font-style: italic;
  }

  /* Dark mode for provider accordion */
  :global([data-theme='dark']) .provider-accordion {
    background: var(--bg-secondary);
    border-color: rgba(255, 255, 255, 0.1);
  }

  :global([data-theme='dark']) .provider-accordion summary {
    color: var(--accent-blue);
  }

  :global([data-theme='dark']) .provider-accordion summary:hover {
    background: rgba(99, 179, 237, 0.1);
  }

  :global([data-theme='dark']) .provider-list a {
    background: var(--bg-primary);
    border-color: rgba(255, 255, 255, 0.1);
    color: var(--text-dark);
  }

  :global([data-theme='dark']) .provider-list a:hover {
    border-color: var(--accent-blue);
    color: var(--accent-blue);
    background: rgba(99, 179, 237, 0.1);
  }

  @media (max-width: 768px) {
    .benefits-list {
      grid-template-columns: 1fr;
    }

    .example-carousel {
      padding: 0 2.5rem;
    }

    .carousel-arrow {
      width: 36px;
      height: 36px;
    }

    .carousel-arrow svg {
      width: 20px;
      height: 20px;
    }
  }

  /* Dark mode overrides for light-background elements */
  :global([data-theme='dark']) .ira-note {
    background: rgba(246, 173, 85, 0.15);
    border-left-color: #f6ad55;
  }

  :global([data-theme='dark']) .ira-note h3,
  :global([data-theme='dark']) .ira-note p {
    color: var(--text-dark);
  }

  :global([data-theme='dark']) .benefit-compact {
    background: var(--bg-secondary);
  }

  :global([data-theme='dark']) .benefit-text strong {
    color: var(--text-dark);
  }

  :global([data-theme='dark']) .ira-requirements {
    background: var(--bg-secondary);
  }

  :global([data-theme='dark']) .ira-requirements li {
    border-bottom-color: rgba(255, 255, 255, 0.1);
  }

  /* RMD Calculator Styles */
  .rmd-calculator {
    background: linear-gradient(135deg, #f0f7fa 0%, #e8f4f8 100%);
    border-radius: 16px;
    padding: 2rem;
    margin-bottom: 3rem;
    border: 1px solid rgba(43, 108, 176, 0.1);
  }

  .calculator-header {
    display: flex;
    align-items: center;
    gap: 1rem;
    margin-bottom: 1.5rem;
  }

  .calculator-icon {
    width: 64px;
    height: 64px;
    background: linear-gradient(135deg, var(--primary-blue) 0%, #3182ce 100%);
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #fff;
    flex-shrink: 0;
  }

  .calculator-title h3 {
    margin: 0 0 0.25rem;
    color: var(--primary-navy);
    font-size: 1.375rem;
  }

  .calculator-title p {
    margin: 0;
    color: var(--text-light);
    font-size: 0.9375rem;
  }

  .calculator-form {
    background: #fff;
    border-radius: 12px;
    padding: 1.5rem;
    margin-bottom: 1.5rem;
  }

  .form-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1.5rem;
    margin-bottom: 1.5rem;
  }

  .form-group {
    display: flex;
    flex-direction: column;
  }

  .form-group label {
    font-weight: 600;
    color: var(--primary-navy);
    margin-bottom: 0.5rem;
    font-size: 0.9375rem;
  }

  .form-group label .required {
    color: #e53e3e;
    margin-left: 0.25rem;
  }

  .input-wrapper {
    position: relative;
  }

  .currency-input {
    display: flex;
    align-items: center;
  }

  .currency-symbol {
    position: absolute;
    left: 1rem;
    color: var(--text-light);
    font-weight: 500;
    pointer-events: none;
  }

  .currency-input input {
    padding-left: 2rem;
  }

  .form-group input,
  .form-group select {
    width: 100%;
    padding: 0.875rem 1rem;
    font-size: 1rem;
    border: 2px solid #e2e8f0;
    border-radius: 8px;
    background: #fff;
    color: var(--text-dark);
    transition:
      border-color 0.2s,
      box-shadow 0.2s;
  }

  .form-group input:focus,
  .form-group select:focus {
    outline: none;
    border-color: var(--primary-blue);
    box-shadow: 0 0 0 3px rgba(43, 108, 176, 0.15);
  }

  .form-group input::placeholder {
    color: #a0aec0;
  }

  .form-group small {
    margin-top: 0.375rem;
    font-size: 0.8125rem;
    color: var(--text-light);
  }

  .calculator-actions {
    display: flex;
    gap: 1rem;
  }

  .calculator-actions .btn {
    padding: 0.875rem 1.5rem;
    font-size: 1rem;
    font-weight: 600;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.2s;
    border: none;
  }

  .calculator-actions .btn-primary {
    background: linear-gradient(135deg, var(--primary-blue) 0%, #3182ce 100%);
    color: #fff;
  }

  .calculator-actions .btn-primary:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(43, 108, 176, 0.3);
  }

  .calculator-actions .btn-secondary {
    background: #fff;
    color: var(--text-dark);
    border: 2px solid #e2e8f0;
  }

  .calculator-actions .btn-secondary:hover {
    border-color: var(--primary-blue);
    background: rgba(43, 108, 176, 0.05);
  }

  .calculator-result {
    animation: fadeIn 0.3s ease;
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(-10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .result-card {
    background: linear-gradient(135deg, #f0fff4 0%, #c6f6d5 100%);
    border-radius: 12px;
    padding: 1.5rem;
    text-align: center;
    margin-bottom: 1rem;
    border: 2px solid #48bb78;
  }

  .result-label {
    font-size: 0.875rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: #276749;
    font-weight: 600;
    margin-bottom: 0.5rem;
  }

  .result-amount {
    font-size: 2.5rem;
    font-weight: 800;
    color: #22543d;
    margin-bottom: 0.75rem;
  }

  .result-details {
    font-size: 0.9375rem;
    color: #276749;
  }

  .result-details p {
    margin: 0;
  }

  .qcd-suggestion {
    display: flex;
    gap: 1rem;
    background: linear-gradient(135deg, #ebf8ff 0%, #bee3f8 100%);
    border-radius: 12px;
    padding: 1.25rem;
    border-left: 4px solid var(--primary-blue);
  }

  .suggestion-icon {
    width: 44px;
    height: 44px;
    background: var(--primary-blue);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #fff;
    flex-shrink: 0;
  }

  .suggestion-content {
    color: #2c5282;
  }

  .suggestion-content strong {
    display: block;
    margin-bottom: 0.25rem;
    color: #1a365d;
  }

  .suggestion-content p {
    margin: 0;
    font-size: 0.9375rem;
    line-height: 1.5;
  }

  .calculator-description {
    margin-bottom: 1.5rem;
    text-align: center;
  }

  .calculator-description p {
    margin: 0;
    color: var(--text-light);
    font-size: 1rem;
    line-height: 1.6;
  }

  .calculator-disclaimer {
    display: flex;
    align-items: flex-start;
    gap: 0.75rem;
    margin-top: 1.5rem;
    padding: 1rem;
    background: rgba(255, 255, 255, 0.7);
    border-radius: 8px;
    font-size: 0.8125rem;
    color: var(--text-light);
    line-height: 1.5;
  }

  .calculator-disclaimer svg {
    flex-shrink: 0;
    color: var(--text-light);
    margin-top: 0.125rem;
  }

  .calculator-disclaimer p {
    margin: 0;
  }

  .calculator-disclaimer a {
    color: var(--primary-blue);
    text-decoration: underline;
  }

  .calculator-disclaimer a:hover {
    color: var(--primary-navy);
  }

  /* Dark mode for calculator */
  :global([data-theme='dark']) .rmd-calculator {
    background: linear-gradient(135deg, rgba(99, 179, 237, 0.1) 0%, rgba(99, 179, 237, 0.05) 100%);
    border-color: rgba(99, 179, 237, 0.2);
  }

  :global([data-theme='dark']) .calculator-title h3 {
    color: var(--text-dark);
  }

  :global([data-theme='dark']) .calculator-form {
    background: var(--card-bg);
  }

  :global([data-theme='dark']) .form-group label {
    color: var(--text-dark);
  }

  :global([data-theme='dark']) .form-group input,
  :global([data-theme='dark']) .form-group select {
    background: var(--bg-primary);
    border-color: rgba(255, 255, 255, 0.1);
    color: var(--text-dark);
  }

  :global([data-theme='dark']) .form-group input:focus,
  :global([data-theme='dark']) .form-group select:focus {
    border-color: var(--accent-blue);
    box-shadow: 0 0 0 3px rgba(99, 179, 237, 0.2);
  }

  :global([data-theme='dark']) .currency-symbol {
    color: var(--text-light);
  }

  :global([data-theme='dark']) .calculator-actions .btn-secondary {
    background: var(--bg-primary);
    border-color: rgba(255, 255, 255, 0.1);
    color: var(--text-dark);
  }

  :global([data-theme='dark']) .calculator-actions .btn-secondary:hover {
    border-color: var(--accent-blue);
    background: rgba(99, 179, 237, 0.1);
  }

  :global([data-theme='dark']) .result-card {
    background: linear-gradient(135deg, rgba(72, 187, 120, 0.2) 0%, rgba(72, 187, 120, 0.1) 100%);
    border-color: #48bb78;
  }

  :global([data-theme='dark']) .result-label {
    color: #9ae6b4;
  }

  :global([data-theme='dark']) .result-amount {
    color: #68d391;
  }

  :global([data-theme='dark']) .result-details {
    color: #9ae6b4;
  }

  :global([data-theme='dark']) .qcd-suggestion {
    background: linear-gradient(135deg, rgba(99, 179, 237, 0.15) 0%, rgba(99, 179, 237, 0.1) 100%);
    border-left-color: var(--accent-blue);
  }

  :global([data-theme='dark']) .suggestion-content {
    color: #90cdf4;
  }

  :global([data-theme='dark']) .suggestion-content strong {
    color: #bee3f8;
  }

  :global([data-theme='dark']) .calculator-disclaimer {
    background: rgba(255, 255, 255, 0.05);
  }

  :global([data-theme='dark']) .calculator-disclaimer a {
    color: var(--accent-blue);
  }

  /* Tax Comparison Section */
  .tax-comparison {
    background: #fff;
    border-radius: 16px;
    padding: 2rem;
    margin-bottom: 3rem;
    box-shadow:
      0 4px 6px -1px rgba(0, 0, 0, 0.05),
      0 10px 20px -5px rgba(0, 0, 0, 0.08);
    border: 1px solid #e2e8f0;
  }

  .tax-comparison h3 {
    text-align: center;
    color: var(--primary-navy);
    margin-bottom: 0.75rem;
    font-size: 1.375rem;
  }

  .comparison-intro {
    text-align: center;
    color: var(--text-light);
    margin-bottom: 1.5rem;
    max-width: 700px;
    margin-left: auto;
    margin-right: auto;
  }

  /* Carousel styles */
  .example-carousel {
    position: relative;
    padding: 0 3rem;
  }

  .carousel-container {
    overflow: hidden;
  }

  .carousel-track {
    display: flex;
    transition: transform 0.4s ease-in-out;
  }

  .carousel-slide {
    min-width: 100%;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s ease;
  }

  .carousel-slide.active {
    opacity: 1;
    visibility: visible;
  }

  .slide-label {
    display: inline-block;
    background: var(--primary-blue);
    color: white;
    padding: 0.375rem 1rem;
    border-radius: 20px;
    font-size: 0.875rem;
    font-weight: 600;
    margin-bottom: 1rem;
  }

  .carousel-arrow {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    width: 44px;
    height: 44px;
    border-radius: 50%;
    background: white;
    border: 2px solid #e2e8f0;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--primary-navy);
    transition: all 0.2s;
    z-index: 10;
  }

  .carousel-arrow:hover {
    background: var(--primary-blue);
    border-color: var(--primary-blue);
    color: white;
  }

  .carousel-arrow:disabled {
    opacity: 0.3;
    cursor: not-allowed;
  }

  .carousel-arrow:disabled:hover {
    background: white;
    border-color: #e2e8f0;
    color: var(--primary-navy);
  }

  .carousel-prev {
    left: 0;
  }

  .carousel-next {
    right: 0;
  }

  .carousel-dots {
    display: flex;
    justify-content: center;
    gap: 0.5rem;
    margin-top: 1.5rem;
  }

  .carousel-dot {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    background: #cbd5e0;
    border: none;
    cursor: pointer;
    padding: 0;
    transition: all 0.2s;
  }

  .carousel-dot:hover {
    background: #a0aec0;
  }

  .carousel-dot.active {
    background: var(--primary-blue);
    width: 24px;
    border-radius: 5px;
  }

  /* Focus styles for accessibility */
  .carousel-arrow:focus-visible,
  .carousel-dot:focus-visible {
    outline: 3px solid var(--primary-blue);
    outline-offset: 2px;
  }

  .scenario-description {
    background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
    border-radius: 10px;
    padding: 1.25rem;
    margin-bottom: 2rem;
    border-left: 4px solid var(--primary-blue);
  }

  .scenario-description p {
    margin: 0;
    color: var(--text-dark);
    line-height: 1.6;
  }

  .comparison-grid {
    display: grid;
    grid-template-columns: 1fr auto 1fr;
    gap: 1.5rem;
    align-items: stretch;
    margin-bottom: 2rem;
  }

  .scenario-card {
    border-radius: 12px;
    overflow: hidden;
    border: 2px solid #e2e8f0;
  }

  .scenario-cash {
    border-color: #e2e8f0;
  }

  .scenario-qcd {
    border-color: #48bb78;
    box-shadow: 0 4px 12px rgba(72, 187, 120, 0.2);
  }

  .scenario-header {
    padding: 1rem 1.25rem;
    position: relative;
  }

  .scenario-cash .scenario-header {
    background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
  }

  .scenario-qcd .scenario-header {
    background: linear-gradient(135deg, #f0fff4 0%, #c6f6d5 100%);
  }

  .scenario-number {
    display: inline-block;
    font-size: 0.75rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--text-light);
    margin-bottom: 0.25rem;
  }

  .scenario-qcd .scenario-number {
    color: #276749;
  }

  .scenario-header h4 {
    margin: 0;
    font-size: 1.0625rem;
    color: var(--primary-navy);
  }

  .scenario-qcd .scenario-header h4 {
    color: #22543d;
  }

  .recommended-badge {
    position: absolute;
    top: 0.75rem;
    right: 0.75rem;
    background: #48bb78;
    color: #fff;
    font-size: 0.6875rem;
    font-weight: 700;
    padding: 0.25rem 0.5rem;
    border-radius: 4px;
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }

  .scenario-body {
    padding: 1.25rem;
    background: #fff;
  }

  .calculation-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.5rem 0;
    border-bottom: 1px solid #f1f5f9;
  }

  .calculation-row:last-child {
    border-bottom: none;
  }

  .calculation-row.subtotal {
    border-top: 1px solid #e2e8f0;
    margin-top: 0.5rem;
    padding-top: 0.75rem;
  }

  .calculation-row.total {
    border-top: 2px solid #e2e8f0;
    margin-top: 0.5rem;
    padding-top: 0.75rem;
  }

  .calc-label {
    font-size: 0.875rem;
    color: var(--text-light);
  }

  .calculation-row.subtotal .calc-label,
  .calculation-row.total .calc-label {
    font-weight: 600;
    color: var(--text-dark);
  }

  .calc-value {
    font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Fira Mono', monospace;
    font-size: 0.9375rem;
    font-weight: 500;
  }

  .calc-value.add {
    color: #9b2c2c;
  }

  .calc-value.subtract {
    color: #2f855a;
  }

  .calc-value.neutral {
    color: var(--text-light);
  }

  .calc-value.highlight-bad {
    font-size: 1.25rem;
    font-weight: 800;
    color: #9b2c2c;
    background: rgba(197, 48, 48, 0.1);
    padding: 0.25rem 0.5rem;
    border-radius: 4px;
  }

  .calc-value.highlight-good {
    font-size: 1.25rem;
    font-weight: 800;
    color: #22543d;
    background: rgba(72, 187, 120, 0.2);
    padding: 0.25rem 0.5rem;
    border-radius: 4px;
  }

  .calculation-row.bracket {
    margin-top: 0.5rem;
    padding-top: 0.75rem;
    border-top: 1px dashed rgba(0, 0, 0, 0.1);
  }

  .calc-value.bracket-bad {
    font-size: 1.125rem;
    font-weight: 700;
    color: #9b2c2c;
    background: rgba(197, 48, 48, 0.1);
    padding: 0.25rem 0.75rem;
    border-radius: 4px;
  }

  .calc-value.bracket-good {
    font-size: 1.125rem;
    font-weight: 700;
    color: #22543d;
    background: rgba(72, 187, 120, 0.2);
    padding: 0.25rem 0.75rem;
    border-radius: 4px;
  }

  .scenario-note {
    padding: 0.75rem 1.25rem;
    font-size: 0.8125rem;
    font-weight: 600;
    text-align: center;
  }

  .scenario-note-bad {
    background: rgba(197, 48, 48, 0.1);
    color: #9b2c2c;
    border-top: 1px solid rgba(197, 48, 48, 0.2);
  }

  .scenario-note-good {
    background: rgba(72, 187, 120, 0.15);
    color: #22543d;
    border-top: 1px solid rgba(72, 187, 120, 0.3);
  }

  .scenario-vs {
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .scenario-vs span {
    background: var(--primary-navy);
    color: #fff;
    font-size: 0.75rem;
    font-weight: 700;
    padding: 0.5rem 0.75rem;
    border-radius: 6px;
  }

  .savings-highlight {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    background: linear-gradient(135deg, #f0fff4 0%, #c6f6d5 100%);
    border-radius: 10px;
    padding: 1rem 1.25rem;
    border: 2px solid #48bb78;
    margin-top: 1.5rem;
  }

  .savings-icon {
    width: 40px;
    height: 40px;
    background: #48bb78;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #fff;
    flex-shrink: 0;
  }

  .savings-content {
    color: #22543d;
  }

  .savings-content strong {
    display: block;
    font-size: 1rem;
    margin-bottom: 0.125rem;
  }

  .savings-content span {
    font-size: 0.875rem;
    color: #276749;
  }

  .comparison-footnotes {
    font-size: 0.8125rem;
    color: var(--text-light);
    line-height: 1.5;
  }

  .comparison-footnotes p {
    margin: 0 0 0.5rem;
  }

  .comparison-footnotes .disclaimer-note {
    margin-top: 1rem;
    padding-top: 0.75rem;
    border-top: 1px solid #e2e8f0;
    font-style: italic;
  }

  /* Dark mode for tax comparison */
  :global([data-theme='dark']) .tax-comparison {
    background: var(--card-bg);
    border-color: rgba(255, 255, 255, 0.1);
  }

  :global([data-theme='dark']) .tax-comparison h3 {
    color: var(--text-dark);
  }

  :global([data-theme='dark']) .slide-label {
    background: var(--accent-blue);
  }

  :global([data-theme='dark']) .carousel-arrow {
    background: var(--bg-secondary);
    border-color: rgba(255, 255, 255, 0.1);
    color: var(--text-dark);
  }

  :global([data-theme='dark']) .carousel-arrow:hover {
    background: var(--accent-blue);
    border-color: var(--accent-blue);
  }

  :global([data-theme='dark']) .carousel-dot {
    background: rgba(255, 255, 255, 0.2);
  }

  :global([data-theme='dark']) .carousel-dot:hover {
    background: rgba(255, 255, 255, 0.4);
  }

  :global([data-theme='dark']) .carousel-dot.active {
    background: var(--accent-blue);
  }

  :global([data-theme='dark']) .scenario-description {
    background: linear-gradient(135deg, rgba(99, 179, 237, 0.1) 0%, rgba(99, 179, 237, 0.05) 100%);
    border-left-color: var(--accent-blue);
  }

  :global([data-theme='dark']) .scenario-card {
    border-color: rgba(255, 255, 255, 0.1);
  }

  :global([data-theme='dark']) .scenario-cash .scenario-header {
    background: linear-gradient(
      135deg,
      rgba(255, 255, 255, 0.05) 0%,
      rgba(255, 255, 255, 0.02) 100%
    );
  }

  :global([data-theme='dark']) .scenario-qcd {
    border-color: #48bb78;
  }

  :global([data-theme='dark']) .scenario-qcd .scenario-header {
    background: linear-gradient(135deg, rgba(72, 187, 120, 0.2) 0%, rgba(72, 187, 120, 0.1) 100%);
  }

  :global([data-theme='dark']) .scenario-header h4 {
    color: var(--text-dark);
  }

  :global([data-theme='dark']) .scenario-qcd .scenario-header h4 {
    color: #9ae6b4;
  }

  :global([data-theme='dark']) .scenario-qcd .scenario-number {
    color: #9ae6b4;
  }

  :global([data-theme='dark']) .scenario-body {
    background: var(--bg-primary);
  }

  :global([data-theme='dark']) .calculation-row {
    border-bottom-color: rgba(255, 255, 255, 0.05);
  }

  :global([data-theme='dark']) .calculation-row.subtotal,
  :global([data-theme='dark']) .calculation-row.total {
    border-top-color: rgba(255, 255, 255, 0.1);
  }

  :global([data-theme='dark']) .calculation-row.subtotal .calc-label,
  :global([data-theme='dark']) .calculation-row.total .calc-label {
    color: var(--text-dark);
  }

  :global([data-theme='dark']) .calc-value.add {
    color: #fc8181;
  }

  :global([data-theme='dark']) .calc-value.subtract {
    color: #68d391;
  }

  :global([data-theme='dark']) .calc-value.highlight-bad {
    color: #feb2b2;
    background: rgba(252, 129, 129, 0.2);
  }

  :global([data-theme='dark']) .calc-value.highlight-good {
    color: #9ae6b4;
    background: rgba(72, 187, 120, 0.25);
  }

  :global([data-theme='dark']) .calculation-row.bracket {
    border-top-color: rgba(255, 255, 255, 0.1);
  }

  :global([data-theme='dark']) .calc-value.bracket-bad {
    color: #feb2b2;
    background: rgba(252, 129, 129, 0.2);
  }

  :global([data-theme='dark']) .calc-value.bracket-good {
    color: #9ae6b4;
    background: rgba(72, 187, 120, 0.25);
  }

  :global([data-theme='dark']) .scenario-note-bad {
    background: rgba(252, 129, 129, 0.15);
    color: #feb2b2;
    border-top-color: rgba(252, 129, 129, 0.2);
  }

  :global([data-theme='dark']) .scenario-note-good {
    background: rgba(72, 187, 120, 0.2);
    color: #9ae6b4;
    border-top-color: rgba(72, 187, 120, 0.3);
  }

  :global([data-theme='dark']) .savings-highlight {
    background: linear-gradient(135deg, rgba(72, 187, 120, 0.2) 0%, rgba(72, 187, 120, 0.1) 100%);
    border-color: #48bb78;
  }

  :global([data-theme='dark']) .savings-content {
    color: #9ae6b4;
  }

  :global([data-theme='dark']) .savings-content strong {
    color: #68d391;
  }

  :global([data-theme='dark']) .savings-content p {
    color: #9ae6b4;
  }

  :global([data-theme='dark']) .comparison-footnotes .disclaimer-note {
    border-top-color: rgba(255, 255, 255, 0.1);
  }

  /* Responsive */
  @media (max-width: 900px) {
    .comparison-grid {
      grid-template-columns: 1fr;
      gap: 1rem;
    }

    .scenario-vs {
      display: none;
    }
  }

  @media (max-width: 600px) {
    .form-row {
      grid-template-columns: 1fr;
      gap: 1rem;
    }

    .calculator-actions {
      flex-direction: column;
    }

    .calculator-actions .btn {
      width: 100%;
    }

    .result-amount {
      font-size: 2rem;
    }

    .qcd-suggestion {
      flex-direction: column;
      text-align: center;
    }

    .suggestion-icon {
      margin: 0 auto;
    }

    .tax-comparison {
      padding: 1.5rem;
    }

    .savings-highlight {
      flex-direction: column;
      text-align: center;
    }

    .savings-icon {
      margin: 0 auto;
    }
  }
</style>

<script>
  // IRS Uniform Lifetime Table (2024) - Distribution Period by Age
  // Source: https://www.irs.gov/publications/p590b
  const uniformLifetimeTable: Record<number, number> = {
    73: 26.5,
    74: 25.5,
    75: 24.6,
    76: 23.7,
    77: 22.9,
    78: 22.0,
    79: 21.1,
    80: 20.2,
    81: 19.4,
    82: 18.5,
    83: 17.7,
    84: 16.8,
    85: 16.0,
    86: 15.2,
    87: 14.4,
    88: 13.7,
    89: 12.9,
    90: 12.2,
    91: 11.5,
    92: 10.8,
    93: 10.1,
    94: 9.5,
    95: 8.9,
    96: 8.4,
    97: 7.8,
    98: 7.3,
    99: 6.8,
    100: 6.4,
    101: 6.0,
    102: 5.6,
    103: 5.2,
    104: 4.9,
    105: 4.6,
    106: 4.3,
    107: 4.1,
    108: 3.9,
    109: 3.7,
    110: 3.5,
    111: 3.4,
    112: 3.3,
    113: 3.1,
    114: 3.0,
    115: 2.9,
    116: 2.8,
    117: 2.7,
    118: 2.5,
    119: 2.3,
    120: 2.0,
  };

  function formatCurrency(amount: number): string {
    return new Intl.NumberFormat('en-US', {
      style: 'currency',
      currency: 'USD',
      minimumFractionDigits: 0,
      maximumFractionDigits: 0,
    }).format(amount);
  }

  function parseBalance(value: string): number {
    // Remove all non-numeric characters except decimal point
    const cleaned = value.replace(/[^0-9.]/g, '');
    return parseFloat(cleaned) || 0;
  }

  function calculateRMD(balance: number, age: number): { rmd: number; period: number } | null {
    const period = uniformLifetimeTable[age];
    if (!period) return null;

    const rmd = balance / period;
    return { rmd, period };
  }

  document.addEventListener('DOMContentLoaded', () => {
    const balanceInput = document.getElementById('account-balance') as HTMLInputElement;
    const ageSelect = document.getElementById('age-select') as HTMLSelectElement;
    const calculateBtn = document.getElementById('calculate-rmd') as HTMLButtonElement;
    const resetBtn = document.getElementById('reset-calculator') as HTMLButtonElement;
    const resultSection = document.getElementById('rmd-result') as HTMLDivElement;
    const rmdAmount = document.getElementById('rmd-amount') as HTMLSpanElement;
    const resultBalance = document.getElementById('result-balance') as HTMLSpanElement;
    const resultAge = document.getElementById('result-age') as HTMLSpanElement;
    const resultPeriod = document.getElementById('result-period') as HTMLSpanElement;
    const qcdMax = document.getElementById('qcd-max') as HTMLSpanElement;

    // Format balance input on blur
    balanceInput?.addEventListener('blur', () => {
      const value = parseBalance(balanceInput.value);
      if (value > 0) {
        balanceInput.value = value.toLocaleString('en-US');
      }
    });

    // Remove formatting on focus
    balanceInput?.addEventListener('focus', () => {
      const value = parseBalance(balanceInput.value);
      if (value > 0) {
        balanceInput.value = value.toString();
      }
    });

    // Calculate RMD
    calculateBtn?.addEventListener('click', () => {
      const balance = parseBalance(balanceInput.value);
      const age = parseInt(ageSelect.value, 10);

      // Validation
      if (balance <= 0) {
        balanceInput.focus();
        balanceInput.style.borderColor = '#e53e3e';
        setTimeout(() => {
          balanceInput.style.borderColor = '';
        }, 2000);
        return;
      }

      if (!age) {
        ageSelect.focus();
        ageSelect.style.borderColor = '#e53e3e';
        setTimeout(() => {
          ageSelect.style.borderColor = '';
        }, 2000);
        return;
      }

      const result = calculateRMD(balance, age);
      if (!result) return;

      // Calculate QCD max (lesser of RMD or $111,000 limit for 2026)
      const qcdLimit = 111000;
      const qcdMaxAmount = Math.min(result.rmd, qcdLimit);

      // Update results
      rmdAmount.textContent = formatCurrency(result.rmd);
      resultBalance.textContent = formatCurrency(balance);
      resultAge.textContent = age.toString();
      resultPeriod.textContent = result.period.toString();
      qcdMax.textContent = formatCurrency(qcdMaxAmount);

      // Show results
      resultSection.hidden = false;
      resultSection.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
    });

    // Reset calculator
    resetBtn?.addEventListener('click', () => {
      balanceInput.value = '';
      ageSelect.value = '';
      resultSection.hidden = true;
    });
  });

  // Example carousel functionality with WCAG 2.2 AAA compliance
  document.addEventListener('DOMContentLoaded', () => {
    const carousel = document.querySelector('.example-carousel') as HTMLElement;
    const track = document.querySelector('.carousel-track') as HTMLElement;
    const slides = document.querySelectorAll('.carousel-slide');
    const dots = document.querySelectorAll('.carousel-dot');
    const prevBtn = document.querySelector('.carousel-prev') as HTMLButtonElement;
    const nextBtn = document.querySelector('.carousel-next') as HTMLButtonElement;
    const statusEl = document.getElementById('carousel-status');

    if (!track || slides.length === 0) return;

    let currentSlide = 0;
    const totalSlides = slides.length;
    const slideNames = [
      'Single Filer',
      'Married Filing Jointly',
      'Higher Income Single',
      'Lower Income',
    ];

    function goToSlide(index: number, announce = true) {
      if (index < 0 || index >= totalSlides) return;

      currentSlide = index;
      track.style.transform = `translateX(-${currentSlide * 100}%)`;

      // Update active states and ARIA
      slides.forEach((slide, i) => {
        const isActive = i === currentSlide;
        slide.classList.toggle('active', isActive);
        slide.setAttribute('aria-hidden', (!isActive).toString());
      });

      dots.forEach((dot, i) => {
        const isActive = i === currentSlide;
        dot.classList.toggle('active', isActive);
        dot.setAttribute('aria-selected', isActive.toString());
      });

      // Update button states
      prevBtn.disabled = currentSlide === 0;
      nextBtn.disabled = currentSlide === totalSlides - 1;

      // Announce slide change to screen readers
      if (announce && statusEl) {
        statusEl.textContent = `Showing ${slideNames[currentSlide]} example, slide ${currentSlide + 1} of ${totalSlides}`;
      }
    }

    prevBtn?.addEventListener('click', () => goToSlide(currentSlide - 1));
    nextBtn?.addEventListener('click', () => goToSlide(currentSlide + 1));

    dots.forEach((dot, index) => {
      dot.addEventListener('click', () => goToSlide(index));
    });

    // Keyboard navigation for the carousel region
    carousel?.addEventListener('keydown', (e: KeyboardEvent) => {
      if (e.key === 'ArrowLeft') {
        e.preventDefault();
        goToSlide(currentSlide - 1);
      } else if (e.key === 'ArrowRight') {
        e.preventDefault();
        goToSlide(currentSlide + 1);
      } else if (e.key === 'Home') {
        e.preventDefault();
        goToSlide(0);
      } else if (e.key === 'End') {
        e.preventDefault();
        goToSlide(totalSlides - 1);
      }
    });

    // Initialize without announcement
    goToSlide(0, false);
  });
</script>
