---
import BaseLayout from '../../layouts/BaseLayout.astro';
import Breadcrumb from '../../components/Breadcrumb.astro';

const structuredData = [
  {
    '@context': 'https://schema.org',
    '@type': 'WebPage',
    name: 'IRA Charitable Rollover (QCD)',
    description:
      'Donate directly from your IRA to Bay Tides tax-free with a Qualified Charitable Distribution.',
    url: 'https://baytides.org/donate/ira',
  },
  {
    '@context': 'https://schema.org',
    '@type': 'BreadcrumbList',
    itemListElement: [
      { '@type': 'ListItem', position: 1, name: 'Home', item: 'https://baytides.org/' },
      { '@type': 'ListItem', position: 2, name: 'Donate', item: 'https://baytides.org/donate' },
      { '@type': 'ListItem', position: 3, name: 'IRA Charitable Rollover' },
    ],
  },
];
---

<BaseLayout
  title="IRA Charitable Rollover (QCD)"
  description="If you're 70½ or older, you can donate directly from your IRA to Bay Tides tax-free. Learn about Qualified Charitable Distributions and how they can benefit you."
  canonicalUrl="https://baytides.org/donate/ira"
  structuredData={structuredData}
>
  <Breadcrumb
    items={[
      { label: 'Home', href: '/' },
      { label: 'Donate', href: '/donate' },
      { label: 'IRA Charitable Rollover' },
    ]}
  />

  <section class="hero hero-page">
    <div class="container">
      <h1>IRA Charitable Rollover</h1>
      <p>Give directly from your IRA and reduce your taxable income</p>
    </div>
  </section>

  <section class="content-section">
    <div class="container">
      <div class="ira-content">
        <div class="ira-intro">
          <h2>What is a Qualified Charitable Distribution?</h2>
          <p>
            A Qualified Charitable Distribution (QCD), also known as an IRA charitable rollover,
            allows individuals aged 70½ or older to donate up to $111,000 per year directly from
            their IRA to qualified charities like Bay Tides. The transfer is tax-free and can count
            toward your Required Minimum Distribution (RMD).
          </p>
        </div>

        <div class="ira-benefits">
          <h3>Key Benefits</h3>
          <div class="benefits-grid">
            <div class="benefit-item">
              <div class="benefit-icon">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="28"
                  height="28"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <line x1="12" y1="1" x2="12" y2="23"></line>
                  <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
                </svg>
              </div>
              <h4>Tax-Free Transfer</h4>
              <p>
                The distribution is excluded from your taxable income, unlike a regular IRA
                withdrawal.
              </p>
            </div>
            <div class="benefit-item">
              <div class="benefit-icon">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="28"
                  height="28"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <polyline points="9 11 12 14 22 4"></polyline>
                  <path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"></path>
                </svg>
              </div>
              <h4>Satisfies RMD</h4>
              <p>
                Your QCD counts toward your Required Minimum Distribution if you're 73 or older.
              </p>
            </div>
            <div class="benefit-item">
              <div class="benefit-icon">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="28"
                  height="28"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
                </svg>
              </div>
              <h4>Lower Adjusted Gross Income</h4>
              <p>May help reduce Medicare premiums and taxation of Social Security benefits.</p>
            </div>
            <div class="benefit-item">
              <div class="benefit-icon">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="28"
                  height="28"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                  <line x1="16" y1="2" x2="16" y2="6"></line>
                  <line x1="8" y1="2" x2="8" y2="6"></line>
                  <line x1="3" y1="10" x2="21" y2="10"></line>
                </svg>
              </div>
              <h4>No Itemizing Required</h4>
              <p>
                You don't need to itemize deductions to benefit - great for those who take the
                standard deduction.
              </p>
            </div>
          </div>
        </div>

        <div class="rmd-calculator">
          <div class="calculator-header">
            <div class="calculator-icon">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="32"
                height="32"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <rect x="4" y="2" width="16" height="20" rx="2"></rect>
                <line x1="8" y1="6" x2="16" y2="6"></line>
                <line x1="8" y1="10" x2="10" y2="10"></line>
                <line x1="12" y1="10" x2="14" y2="10"></line>
                <line x1="8" y1="14" x2="10" y2="14"></line>
                <line x1="12" y1="14" x2="14" y2="14"></line>
                <line x1="8" y1="18" x2="10" y2="18"></line>
                <line x1="12" y1="18" x2="16" y2="18"></line>
              </svg>
            </div>
            <div class="calculator-title">
              <h3>RMD Calculator</h3>
              <p>Estimate your Required Minimum Distribution</p>
            </div>
          </div>

          <div class="calculator-form">
            <div class="form-row">
              <div class="form-group">
                <label for="account-balance">
                  Previous Year-End Account Balance
                  <span class="required">*</span>
                </label>
                <div class="input-wrapper currency-input">
                  <span class="currency-symbol">$</span>
                  <input
                    type="text"
                    id="account-balance"
                    placeholder="0"
                    inputmode="numeric"
                    aria-describedby="balance-help"
                  />
                </div>
                <small id="balance-help">Your IRA balance as of December 31 of last year</small>
              </div>

              <div class="form-group">
                <label for="age-select">
                  Your Age at Year-End
                  <span class="required">*</span>
                </label>
                <select id="age-select" aria-describedby="age-help">
                  <option value="">Select your age</option>
                  <option value="73">73</option>
                  <option value="74">74</option>
                  <option value="75">75</option>
                  <option value="76">76</option>
                  <option value="77">77</option>
                  <option value="78">78</option>
                  <option value="79">79</option>
                  <option value="80">80</option>
                  <option value="81">81</option>
                  <option value="82">82</option>
                  <option value="83">83</option>
                  <option value="84">84</option>
                  <option value="85">85</option>
                  <option value="86">86</option>
                  <option value="87">87</option>
                  <option value="88">88</option>
                  <option value="89">89</option>
                  <option value="90">90</option>
                  <option value="91">91</option>
                  <option value="92">92</option>
                  <option value="93">93</option>
                  <option value="94">94</option>
                  <option value="95">95</option>
                  <option value="96">96</option>
                  <option value="97">97</option>
                  <option value="98">98</option>
                  <option value="99">99</option>
                  <option value="100">100</option>
                  <option value="101">101</option>
                  <option value="102">102</option>
                  <option value="103">103</option>
                  <option value="104">104</option>
                  <option value="105">105</option>
                  <option value="106">106</option>
                  <option value="107">107</option>
                  <option value="108">108</option>
                  <option value="109">109</option>
                  <option value="110">110</option>
                  <option value="111">111</option>
                  <option value="112">112</option>
                  <option value="113">113</option>
                  <option value="114">114</option>
                  <option value="115">115</option>
                  <option value="116">116</option>
                  <option value="117">117</option>
                  <option value="118">118</option>
                  <option value="119">119</option>
                  <option value="120">120+</option>
                </select>
                <small id="age-help">Your age at the end of this year</small>
              </div>
            </div>

            <div class="calculator-actions">
              <button type="button" id="calculate-rmd" class="btn btn-primary">
                Calculate RMD
              </button>
              <button type="button" id="reset-calculator" class="btn btn-secondary">Reset</button>
            </div>
          </div>

          <div id="rmd-result" class="calculator-result" hidden>
            <div class="result-card">
              <div class="result-label">Your Estimated RMD</div>
              <div class="result-amount" id="rmd-amount">$0</div>
              <div class="result-details">
                <p>
                  Based on a balance of <strong id="result-balance">$0</strong> and age <strong
                    id="result-age"
                  >
                    0
                  </strong>, using the IRS Uniform Lifetime Table (distribution period: <span
                    id="result-period"
                  >
                    0
                  </span> years).
                </p>
              </div>
            </div>

            <div class="qcd-suggestion">
              <div class="suggestion-icon">
                <svg
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path
                    d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"
                  >
                  </path>
                </svg>
              </div>
              <div class="suggestion-content">
                <strong>Consider a QCD!</strong>
                <p>
                  You could satisfy your RMD by donating up to
                  <strong id="qcd-max">$0</strong> directly to Bay Tides tax-free. This counts toward
                  your RMD without increasing your taxable income.
                </p>
              </div>
            </div>
          </div>

          <div class="calculator-description">
            <p>
              Use this calculator to determine how much money you need to take out of your
              traditional IRA or 401(k) account this year.
            </p>
          </div>

          <div class="calculator-disclaimer">
            <svg
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <circle cx="12" cy="12" r="10"></circle>
              <line x1="12" y1="16" x2="12" y2="12"></line>
              <line x1="12" y1="8" x2="12.01" y2="8"></line>
            </svg>
            <p>
              <strong>Note:</strong> If your spouse is <em>
                more than ten years younger than you
              </em>, please review
              <a
                href="https://www.irs.gov/publications/p590b"
                target="_blank"
                rel="noopener noreferrer"
              >
                IRS Publication 590-B
              </a> to calculate your RMD using the Joint Life and Last Survivor Expectancy Table. This
              calculator uses the Uniform Lifetime Table and provides estimates only. Please consult your
              tax advisor for personalized guidance.
            </p>
          </div>
        </div>

        <div class="tax-comparison">
          <h3>Cash Donation vs. QCD: See the Tax Difference</h3>
          <p class="comparison-intro">
            Taking your full RMD and then donating cash could result in a higher tax bill than
            giving through a QCD. Here's an example showing why a QCD to Bay Tides can make sense:
          </p>

          <div class="scenario-description">
            <p>
              <strong>Meet Sarah:</strong> She's 76 years old and single, with $32,000 in Social Security
              and pension income. Her IRA balance requires an RMD of $18,000 this year. She wants to donate
              $5,000 to support Bay Tides' conservation work.
            </p>
          </div>

          <div class="comparison-grid">
            <div class="scenario-card scenario-cash">
              <div class="scenario-header">
                <span class="scenario-number">Option 1</span>
                <h4>Take RMD + Donate Cash</h4>
              </div>
              <div class="scenario-body">
                <div class="calculation-row">
                  <span class="calc-label">Social Security & pension</span>
                  <span class="calc-value">$32,000</span>
                </div>
                <div class="calculation-row">
                  <span class="calc-label">RMD (fully taxable)</span>
                  <span class="calc-value add">+ $18,000</span>
                </div>
                <div class="calculation-row">
                  <span class="calc-label">QCD</span>
                  <span class="calc-value neutral">$0</span>
                </div>
                <div class="calculation-row subtotal">
                  <span class="calc-label">Adjusted Gross Income</span>
                  <span class="calc-value">= $50,000</span>
                </div>
                <div class="calculation-row">
                  <span class="calc-label">Standard deduction**</span>
                  <span class="calc-value subtract">– $18,150</span>
                </div>
                <div class="calculation-row total">
                  <span class="calc-label">Taxable Income</span>
                  <span class="calc-value highlight-bad">= $31,850</span>
                </div>
              </div>
              <div class="scenario-note scenario-note-bad">
                Cash donation provides no tax benefit with standard deduction*
              </div>
            </div>

            <div class="scenario-vs">
              <span>VS</span>
            </div>

            <div class="scenario-card scenario-qcd">
              <div class="scenario-header">
                <span class="scenario-number">Option 2</span>
                <h4>Donate $5,000 via QCD</h4>
                <span class="recommended-badge">Better</span>
              </div>
              <div class="scenario-body">
                <div class="calculation-row">
                  <span class="calc-label">Social Security & pension</span>
                  <span class="calc-value">$32,000</span>
                </div>
                <div class="calculation-row">
                  <span class="calc-label">RMD</span>
                  <span class="calc-value add">+ $18,000</span>
                </div>
                <div class="calculation-row">
                  <span class="calc-label">QCD to Bay Tides</span>
                  <span class="calc-value subtract">– $5,000</span>
                </div>
                <div class="calculation-row subtotal">
                  <span class="calc-label">Adjusted Gross Income</span>
                  <span class="calc-value">= $45,000</span>
                </div>
                <div class="calculation-row">
                  <span class="calc-label">Standard deduction**</span>
                  <span class="calc-value subtract">– $18,150</span>
                </div>
                <div class="calculation-row total">
                  <span class="calc-label">Taxable Income</span>
                  <span class="calc-value highlight-good">= $26,850</span>
                </div>
              </div>
              <div class="scenario-note scenario-note-good">
                QCD excludes $5,000 from taxable income entirely
              </div>
            </div>
          </div>

          <div class="savings-highlight">
            <div class="savings-icon">
              <svg
                width="28"
                height="28"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <path d="M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
              </svg>
            </div>
            <div class="savings-content">
              <strong>Sarah saves with a QCD: $5,000 lower taxable income</strong>
              <p>
                By donating directly from her IRA to Bay Tides, Sarah reduces her taxable income by
                the full donation amount. This can also lower Medicare Part B premiums and reduce
                taxation of her Social Security benefits.
              </p>
            </div>
          </div>

          <div class="comparison-footnotes">
            <p>
              * With the standard deduction, Sarah gets no additional tax benefit from a cash
              donation since she doesn't itemize. The $5,000 gift "disappears" tax-wise.
            </p>
            <p>
              ** 2026 standard deduction for single filer age 65+: $16,100 + $2,050 additional =
              $18,150.
            </p>
            <p class="disclaimer-note">
              This hypothetical example is for illustrative purposes only and is not intended as tax
              advice. Consult your tax professional for personalized guidance.
            </p>
          </div>
        </div>

        <div class="ira-requirements">
          <h3>Requirements</h3>
          <ul>
            <li>You must be <strong>age 70½ or older</strong> at the time of the distribution</li>
            <li>
              The gift must be transferred <strong>directly from your IRA</strong> to Bay Tides (not to
              you first)
            </li>
            <li>
              Maximum of <strong>$111,000 per person per year</strong> (2026 limit, adjusted annually
              for inflation)
            </li>
            <li>
              Must come from a <strong>traditional IRA or Roth IRA</strong> (not 401(k), 403(b), or pension
              plans)
            </li>
            <li>
              You <strong>cannot receive any goods or services</strong> in exchange for the gift
            </li>
          </ul>
        </div>

        <div class="ira-steps">
          <h3>How to Make a QCD</h3>
          <ol role="list">
            <li>
              <strong>Contact your IRA administrator</strong> and request a Qualified Charitable Distribution
              to Bay Tides.
            </li>
            <li>
              <strong>Provide our information:</strong>
              <ul>
                <li>Legal Name: Bay Tides</li>
                <li>EIN: 93-3889081</li>
                <li>Address: 274 Redwood Shores Pkwy #619, Redwood City, CA 94065</li>
              </ul>
            </li>
            <li>
              <strong>Specify the amount</strong> you wish to donate (up to $111,000).
            </li>
            <li>
              <strong>Notify us</strong> that a QCD is coming so we can properly acknowledge your gift.
            </li>
          </ol>
        </div>

        <div class="custodian-links">
          <h3>Quick Links to Your IRA Provider</h3>
          <p class="custodian-intro">
            Access your account directly to initiate a QCD. Select your provider below to log in and
            request your distribution.
          </p>

          <div class="provider-categories provider-categories-three">
            <div class="provider-category">
              <h4>
                <!-- Lucide: landmark -->
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="20"
                  height="20"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <path d="M10 18v-7"></path><path
                    d="M11.12 2.198a2 2 0 0 1 1.76.006l7.866 3.847c.476.233.31.949-.22.949H3.474c-.53 0-.695-.716-.22-.949z"
                  >
                  </path><path d="M14 18v-7"></path><path d="M18 18v-7"></path><path d="M3 22h18">
                  </path><path d="M6 18v-7"></path>
                </svg>
                IRA Custodians
              </h4>
              <div class="provider-grid provider-grid-single">
                <a
                  href="https://www.schwab.com"
                  target="_blank"
                  rel="noopener noreferrer"
                  class="provider-link"
                >
                  <span class="provider-name">Charles Schwab</span>
                  <!-- Lucide: external-link -->
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="14"
                    height="14"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  >
                    <path d="M15 3h6v6"></path><path d="M10 14 21 3"></path><path
                      d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"
                    >
                    </path>
                  </svg>
                </a>
                <a
                  href="https://www.fidelity.com"
                  target="_blank"
                  rel="noopener noreferrer"
                  class="provider-link"
                >
                  <span class="provider-name">Fidelity</span>
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="14"
                    height="14"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  >
                    <path d="M15 3h6v6"></path><path d="M10 14 21 3"></path><path
                      d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"
                    >
                    </path>
                  </svg>
                </a>
                <a
                  href="https://investor.vanguard.com"
                  target="_blank"
                  rel="noopener noreferrer"
                  class="provider-link"
                >
                  <span class="provider-name">Vanguard</span>
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="14"
                    height="14"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  >
                    <path d="M15 3h6v6"></path><path d="M10 14 21 3"></path><path
                      d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"
                    >
                    </path>
                  </svg>
                </a>
              </div>
            </div>

            <div class="provider-category">
              <h4>
                <!-- Lucide: globe -->
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="20"
                  height="20"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <circle cx="12" cy="12" r="10"></circle><path
                    d="M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20"
                  >
                  </path><path d="M2 12h20"></path>
                </svg>
                National Advisors
              </h4>
              <div class="provider-grid provider-grid-single">
                <a
                  href="https://advisor.morganstanley.com/the-san-francisco-wealth-management-group"
                  target="_blank"
                  rel="noopener noreferrer"
                  class="provider-link"
                >
                  <span class="provider-name">Morgan Stanley</span>
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="14"
                    height="14"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  >
                    <path d="M15 3h6v6"></path><path d="M10 14 21 3"></path><path
                      d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"
                    >
                    </path>
                  </svg>
                </a>
                <a
                  href="https://privatebank.jpmorgan.com/nam/en/locations/united-states/california/san-francisco"
                  target="_blank"
                  rel="noopener noreferrer"
                  class="provider-link"
                >
                  <span class="provider-name">J.P. Morgan</span>
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="14"
                    height="14"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  >
                    <path d="M15 3h6v6"></path><path d="M10 14 21 3"></path><path
                      d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"
                    >
                    </path>
                  </svg>
                </a>
                <a
                  href="https://local.ubs.com/san-francisco-pwm/"
                  target="_blank"
                  rel="noopener noreferrer"
                  class="provider-link"
                >
                  <span class="provider-name">UBS</span>
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="14"
                    height="14"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  >
                    <path d="M15 3h6v6"></path><path d="M10 14 21 3"></path><path
                      d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"
                    >
                    </path>
                  </svg>
                </a>
                <a
                  href="https://www.bessemertrust.com/wealth-management-san-francisco"
                  target="_blank"
                  rel="noopener noreferrer"
                  class="provider-link"
                >
                  <span class="provider-name">Bessemer Trust</span>
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="14"
                    height="14"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  >
                    <path d="M15 3h6v6"></path><path d="M10 14 21 3"></path><path
                      d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"
                    >
                    </path>
                  </svg>
                </a>
                <a
                  href="https://evercorewealthandtrust.com"
                  target="_blank"
                  rel="noopener noreferrer"
                  class="provider-link"
                >
                  <span class="provider-name">Evercore</span>
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="14"
                    height="14"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  >
                    <path d="M15 3h6v6"></path><path d="M10 14 21 3"></path><path
                      d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"
                    >
                    </path>
                  </svg>
                </a>
                <a
                  href="https://aspiriant.com/locations/san-francisco/"
                  target="_blank"
                  rel="noopener noreferrer"
                  class="provider-link"
                >
                  <span class="provider-name">Aspiriant</span>
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="14"
                    height="14"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  >
                    <path d="M15 3h6v6"></path><path d="M10 14 21 3"></path><path
                      d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"
                    >
                    </path>
                  </svg>
                </a>
                <a
                  href="https://www.marinerwealthadvisors.com/locations/san-francisco-bay-area/"
                  target="_blank"
                  rel="noopener noreferrer"
                  class="provider-link"
                >
                  <span class="provider-name">Mariner Wealth</span>
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="14"
                    height="14"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  >
                    <path d="M15 3h6v6"></path><path d="M10 14 21 3"></path><path
                      d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"
                    >
                    </path>
                  </svg>
                </a>
                <a
                  href="https://www.merceradvisors.com"
                  target="_blank"
                  rel="noopener noreferrer"
                  class="provider-link"
                >
                  <span class="provider-name">Mercer Advisors</span>
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="14"
                    height="14"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  >
                    <path d="M15 3h6v6"></path><path d="M10 14 21 3"></path><path
                      d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"
                    >
                    </path>
                  </svg>
                </a>
              </div>
            </div>

            <div class="provider-category">
              <h4>
                <!-- Lucide: building-2 -->
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="20"
                  height="20"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <path d="M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z"></path><path
                    d="M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2"
                  >
                  </path><path d="M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2"></path><path
                    d="M10 6h4"
                  >
                  </path><path d="M10 10h4"></path><path d="M10 14h4"></path><path d="M10 18h4">
                  </path>
                </svg>
                Bay Area Advisors
              </h4>
              <div class="provider-grid provider-grid-single">
                <a
                  href="https://iconiqcapital.com"
                  target="_blank"
                  rel="noopener noreferrer"
                  class="provider-link"
                >
                  <span class="provider-name">Iconiq Capital</span>
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="14"
                    height="14"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  >
                    <path d="M15 3h6v6"></path><path d="M10 14 21 3"></path><path
                      d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"
                    >
                    </path>
                  </svg>
                </a>
                <a
                  href="https://www.hallcapital.com"
                  target="_blank"
                  rel="noopener noreferrer"
                  class="provider-link"
                >
                  <span class="provider-name">Hall Capital</span>
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="14"
                    height="14"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  >
                    <path d="M15 3h6v6"></path><path d="M10 14 21 3"></path><path
                      d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"
                    >
                    </path>
                  </svg>
                </a>
                <a
                  href="https://cressetcapital.com"
                  target="_blank"
                  rel="noopener noreferrer"
                  class="provider-link"
                >
                  <span class="provider-name">Cresset</span>
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="14"
                    height="14"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  >
                    <path d="M15 3h6v6"></path><path d="M10 14 21 3"></path><path
                      d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"
                    >
                    </path>
                  </svg>
                </a>
                <a
                  href="https://kayne.com"
                  target="_blank"
                  rel="noopener noreferrer"
                  class="provider-link"
                >
                  <span class="provider-name">Kayne Anderson</span>
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="14"
                    height="14"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  >
                    <path d="M15 3h6v6"></path><path d="M10 14 21 3"></path><path
                      d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"
                    >
                    </path>
                  </svg>
                </a>
              </div>
            </div>
          </div>

          <p class="custodian-note">
            <!-- Lucide: info -->
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path
                d="M12 8h.01"
              >
              </path>
            </svg>
            Don't see your provider? Contact your IRA custodian or financial advisor directly and request
            a Qualified Charitable Distribution to Bay Tides.
          </p>
        </div>

        <div class="ira-note">
          <h3>Important Note</h3>
          <p>
            Because QCDs are tax-free transfers, you cannot also claim a charitable deduction for
            the same gift. However, for many donors, the tax exclusion from income is more valuable
            than an itemized deduction would be.
          </p>
          <p>
            We recommend consulting with your tax advisor to determine if a QCD is the best giving
            strategy for your situation.
          </p>
        </div>

        <div class="ira-cta">
          <h3>Ready to Give?</h3>
          <p>Contact us for assistance or to let us know a QCD is on its way.</p>
          <a href="/contact" class="btn btn-primary btn-large">Contact Us</a>
        </div>
      </div>
    </div>
  </section>
</BaseLayout>

<style>
  .ira-content {
    max-width: 900px;
    margin: 0 auto;
  }

  .ira-intro {
    margin-bottom: 3rem;
    text-align: center;
  }

  .ira-intro h2 {
    margin-bottom: 1.5rem;
  }

  .ira-intro p {
    font-size: 1.125rem;
    line-height: 1.8;
    color: var(--text-light);
    max-width: 750px;
    margin: 0 auto;
  }

  .ira-benefits {
    margin-bottom: 3rem;
  }

  .ira-benefits h3 {
    margin-bottom: 1.5rem;
    color: var(--primary-navy);
    text-align: center;
  }

  .benefits-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 1.5rem;
  }

  .benefit-item {
    background: var(--light-blue);
    border-radius: 12px;
    padding: 1.5rem;
  }

  .benefit-icon {
    width: 56px;
    height: 56px;
    background: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 1rem;
    color: var(--primary-navy);
  }

  .benefit-item h4 {
    color: var(--primary-navy);
    margin-bottom: 0.5rem;
    font-size: 1rem;
  }

  .benefit-item p {
    font-size: 0.9375rem;
    color: var(--text-light);
    line-height: 1.6;
    margin: 0;
  }

  .ira-requirements {
    background: var(--cream);
    border-radius: 12px;
    padding: 2rem;
    margin-bottom: 3rem;
  }

  .ira-requirements h3 {
    margin-bottom: 1.5rem;
    color: var(--primary-navy);
  }

  .ira-requirements ul {
    list-style: none;
    padding: 0;
    margin: 0;
  }

  .ira-requirements li {
    padding: 0.75rem 0;
    padding-left: 2rem;
    position: relative;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  }

  .ira-requirements li:last-child {
    border-bottom: none;
  }

  .ira-requirements li::before {
    content: '';
    position: absolute;
    left: 0;
    top: 1.1rem;
    width: 8px;
    height: 8px;
    background: var(--primary-navy);
    border-radius: 50%;
  }

  .ira-steps {
    margin-bottom: 3rem;
  }

  .ira-steps h3 {
    margin-bottom: 1.5rem;
    color: var(--primary-navy);
  }

  .ira-steps ol {
    list-style: none;
    padding: 0;
    counter-reset: steps;
  }

  .ira-steps li {
    counter-increment: steps;
    padding: 1rem 0 1rem 3.5rem;
    position: relative;
    border-bottom: 1px solid var(--border-color, #e2e8f0);
  }

  .ira-steps li:last-child {
    border-bottom: none;
  }

  .ira-steps li::before {
    content: counter(steps);
    position: absolute;
    left: 0;
    top: 1rem;
    width: 2rem;
    height: 2rem;
    background: var(--primary-navy);
    color: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 600;
    font-size: 0.875rem;
  }

  .ira-steps li ul {
    margin: 0.75rem 0 0 1rem;
    list-style: disc;
  }

  .ira-steps li ul li {
    padding: 0.25rem 0;
    border-bottom: none;
  }

  .ira-steps li ul li::before {
    display: none;
  }

  .ira-note {
    background: #fff8e6;
    border-radius: 12px;
    padding: 2rem;
    margin-bottom: 3rem;
    border-left: 4px solid #f6ad55;
  }

  .ira-note h3 {
    margin-bottom: 1rem;
    color: var(--primary-navy);
  }

  .ira-note p {
    margin-bottom: 1rem;
    line-height: 1.7;
  }

  .ira-note p:last-child {
    margin-bottom: 0;
  }

  .ira-cta {
    text-align: center;
    padding: 2rem 0;
    border-top: 1px solid var(--border-color, #e2e8f0);
  }

  .ira-cta h3 {
    margin-bottom: 0.75rem;
    color: var(--primary-navy);
  }

  .ira-cta p {
    margin-bottom: 1.5rem;
    color: var(--text-light);
  }

  /* Custodian Links Section */
  .custodian-links {
    background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
    border-radius: 16px;
    padding: 2rem;
    margin-bottom: 3rem;
    border: 1px solid #e2e8f0;
  }

  .custodian-links h3 {
    text-align: center;
    color: var(--primary-navy);
    margin-bottom: 0.75rem;
    font-size: 1.375rem;
  }

  .custodian-intro {
    text-align: center;
    color: var(--text-light);
    margin-bottom: 2rem;
    max-width: 600px;
    margin-left: auto;
    margin-right: auto;
  }

  .provider-categories {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 2rem;
    margin-bottom: 1.5rem;
  }

  .provider-categories-three {
    grid-template-columns: repeat(3, 1fr);
  }

  .provider-category {
    background: #fff;
    border-radius: 12px;
    padding: 1.5rem;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
  }

  .provider-category h4 {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    color: var(--primary-navy);
    margin-bottom: 1rem;
    font-size: 1rem;
    padding-bottom: 0.75rem;
    border-bottom: 2px solid var(--light-blue);
  }

  .provider-category h4 svg {
    color: var(--primary-blue);
    flex-shrink: 0;
  }

  .provider-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 0.75rem;
  }

  .provider-grid-single {
    grid-template-columns: 1fr;
  }

  .provider-link {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0.75rem 1rem;
    background: var(--light-blue);
    border-radius: 8px;
    text-decoration: none;
    transition: all 0.2s;
    border: 1px solid transparent;
  }

  .provider-link:hover {
    background: #fff;
    border-color: var(--primary-blue);
    transform: translateY(-1px);
    box-shadow: 0 2px 8px rgba(43, 108, 176, 0.15);
  }

  .provider-name {
    font-size: 0.875rem;
    font-weight: 500;
    color: var(--primary-navy);
  }

  .provider-link svg {
    color: var(--primary-blue);
    opacity: 0.5;
    transition: opacity 0.2s;
  }

  .provider-link:hover svg {
    opacity: 1;
  }

  .custodian-note {
    display: flex;
    align-items: flex-start;
    gap: 0.75rem;
    margin: 0;
    padding: 1rem;
    background: rgba(255, 255, 255, 0.7);
    border-radius: 8px;
    font-size: 0.875rem;
    color: var(--text-light);
    line-height: 1.5;
  }

  .custodian-note svg {
    flex-shrink: 0;
    margin-top: 0.125rem;
    color: var(--primary-blue);
  }

  /* Dark mode for custodian links */
  :global([data-theme='dark']) .custodian-links {
    background: linear-gradient(135deg, rgba(99, 179, 237, 0.1) 0%, rgba(99, 179, 237, 0.05) 100%);
    border-color: rgba(255, 255, 255, 0.1);
  }

  :global([data-theme='dark']) .custodian-links h3 {
    color: var(--text-dark);
  }

  :global([data-theme='dark']) .provider-category {
    background: var(--card-bg);
  }

  :global([data-theme='dark']) .provider-category h4 {
    color: var(--text-dark);
    border-bottom-color: rgba(99, 179, 237, 0.2);
  }

  :global([data-theme='dark']) .provider-category h4 svg {
    color: var(--accent-blue);
  }

  :global([data-theme='dark']) .provider-link {
    background: var(--bg-secondary);
  }

  :global([data-theme='dark']) .provider-link:hover {
    background: var(--bg-primary);
    border-color: var(--accent-blue);
  }

  :global([data-theme='dark']) .provider-name {
    color: var(--text-dark);
  }

  :global([data-theme='dark']) .provider-link svg {
    color: var(--accent-blue);
  }

  :global([data-theme='dark']) .custodian-note {
    background: rgba(255, 255, 255, 0.05);
  }

  :global([data-theme='dark']) .custodian-note svg {
    color: var(--accent-blue);
  }

  @media (max-width: 1024px) {
    .provider-categories-three {
      grid-template-columns: 1fr 1fr;
    }

    .provider-categories-three .provider-category:last-child {
      grid-column: span 2;
    }

    .provider-categories-three .provider-category:last-child .provider-grid-single {
      grid-template-columns: 1fr 1fr;
    }
  }

  @media (max-width: 768px) {
    .provider-categories,
    .provider-categories-three {
      grid-template-columns: 1fr;
      gap: 1.5rem;
    }

    .provider-categories-three .provider-category:last-child {
      grid-column: span 1;
    }

    .provider-categories-three .provider-category:last-child .provider-grid-single {
      grid-template-columns: 1fr;
    }
  }

  @media (max-width: 600px) {
    .provider-grid {
      grid-template-columns: 1fr;
    }

    .custodian-links {
      padding: 1.5rem;
    }
  }

  @media (max-width: 768px) {
    .benefits-grid {
      grid-template-columns: 1fr;
    }
  }

  /* Dark mode overrides for light-background elements */
  :global([data-theme='dark']) .ira-note {
    background: rgba(246, 173, 85, 0.15);
    border-left-color: #f6ad55;
  }

  :global([data-theme='dark']) .ira-note h3,
  :global([data-theme='dark']) .ira-note p {
    color: var(--text-dark);
  }

  :global([data-theme='dark']) .benefit-item {
    background: var(--bg-secondary);
  }

  :global([data-theme='dark']) .benefit-icon {
    background: var(--bg-primary);
  }

  :global([data-theme='dark']) .ira-requirements {
    background: var(--bg-secondary);
  }

  :global([data-theme='dark']) .ira-requirements li {
    border-bottom-color: rgba(255, 255, 255, 0.1);
  }

  /* RMD Calculator Styles */
  .rmd-calculator {
    background: linear-gradient(135deg, #f0f7fa 0%, #e8f4f8 100%);
    border-radius: 16px;
    padding: 2rem;
    margin-bottom: 3rem;
    border: 1px solid rgba(43, 108, 176, 0.1);
  }

  .calculator-header {
    display: flex;
    align-items: center;
    gap: 1rem;
    margin-bottom: 1.5rem;
  }

  .calculator-icon {
    width: 64px;
    height: 64px;
    background: linear-gradient(135deg, var(--primary-blue) 0%, #3182ce 100%);
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #fff;
    flex-shrink: 0;
  }

  .calculator-title h3 {
    margin: 0 0 0.25rem;
    color: var(--primary-navy);
    font-size: 1.375rem;
  }

  .calculator-title p {
    margin: 0;
    color: var(--text-light);
    font-size: 0.9375rem;
  }

  .calculator-form {
    background: #fff;
    border-radius: 12px;
    padding: 1.5rem;
    margin-bottom: 1.5rem;
  }

  .form-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1.5rem;
    margin-bottom: 1.5rem;
  }

  .form-group {
    display: flex;
    flex-direction: column;
  }

  .form-group label {
    font-weight: 600;
    color: var(--primary-navy);
    margin-bottom: 0.5rem;
    font-size: 0.9375rem;
  }

  .form-group label .required {
    color: #e53e3e;
    margin-left: 0.25rem;
  }

  .input-wrapper {
    position: relative;
  }

  .currency-input {
    display: flex;
    align-items: center;
  }

  .currency-symbol {
    position: absolute;
    left: 1rem;
    color: var(--text-light);
    font-weight: 500;
    pointer-events: none;
  }

  .currency-input input {
    padding-left: 2rem;
  }

  .form-group input,
  .form-group select {
    width: 100%;
    padding: 0.875rem 1rem;
    font-size: 1rem;
    border: 2px solid #e2e8f0;
    border-radius: 8px;
    background: #fff;
    color: var(--text-dark);
    transition:
      border-color 0.2s,
      box-shadow 0.2s;
  }

  .form-group input:focus,
  .form-group select:focus {
    outline: none;
    border-color: var(--primary-blue);
    box-shadow: 0 0 0 3px rgba(43, 108, 176, 0.15);
  }

  .form-group input::placeholder {
    color: #a0aec0;
  }

  .form-group small {
    margin-top: 0.375rem;
    font-size: 0.8125rem;
    color: var(--text-light);
  }

  .calculator-actions {
    display: flex;
    gap: 1rem;
  }

  .calculator-actions .btn {
    padding: 0.875rem 1.5rem;
    font-size: 1rem;
    font-weight: 600;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.2s;
    border: none;
  }

  .calculator-actions .btn-primary {
    background: linear-gradient(135deg, var(--primary-blue) 0%, #3182ce 100%);
    color: #fff;
  }

  .calculator-actions .btn-primary:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(43, 108, 176, 0.3);
  }

  .calculator-actions .btn-secondary {
    background: #fff;
    color: var(--text-dark);
    border: 2px solid #e2e8f0;
  }

  .calculator-actions .btn-secondary:hover {
    border-color: var(--primary-blue);
    background: rgba(43, 108, 176, 0.05);
  }

  .calculator-result {
    animation: fadeIn 0.3s ease;
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(-10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .result-card {
    background: linear-gradient(135deg, #f0fff4 0%, #c6f6d5 100%);
    border-radius: 12px;
    padding: 1.5rem;
    text-align: center;
    margin-bottom: 1rem;
    border: 2px solid #48bb78;
  }

  .result-label {
    font-size: 0.875rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: #276749;
    font-weight: 600;
    margin-bottom: 0.5rem;
  }

  .result-amount {
    font-size: 2.5rem;
    font-weight: 800;
    color: #22543d;
    margin-bottom: 0.75rem;
  }

  .result-details {
    font-size: 0.9375rem;
    color: #276749;
  }

  .result-details p {
    margin: 0;
  }

  .qcd-suggestion {
    display: flex;
    gap: 1rem;
    background: linear-gradient(135deg, #ebf8ff 0%, #bee3f8 100%);
    border-radius: 12px;
    padding: 1.25rem;
    border-left: 4px solid var(--primary-blue);
  }

  .suggestion-icon {
    width: 44px;
    height: 44px;
    background: var(--primary-blue);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #fff;
    flex-shrink: 0;
  }

  .suggestion-content {
    color: #2c5282;
  }

  .suggestion-content strong {
    display: block;
    margin-bottom: 0.25rem;
    color: #1a365d;
  }

  .suggestion-content p {
    margin: 0;
    font-size: 0.9375rem;
    line-height: 1.5;
  }

  .calculator-description {
    margin-bottom: 1.5rem;
    text-align: center;
  }

  .calculator-description p {
    margin: 0;
    color: var(--text-light);
    font-size: 1rem;
    line-height: 1.6;
  }

  .calculator-disclaimer {
    display: flex;
    align-items: flex-start;
    gap: 0.75rem;
    margin-top: 1.5rem;
    padding: 1rem;
    background: rgba(255, 255, 255, 0.7);
    border-radius: 8px;
    font-size: 0.8125rem;
    color: var(--text-light);
    line-height: 1.5;
  }

  .calculator-disclaimer svg {
    flex-shrink: 0;
    color: var(--text-light);
    margin-top: 0.125rem;
  }

  .calculator-disclaimer p {
    margin: 0;
  }

  .calculator-disclaimer a {
    color: var(--primary-blue);
    text-decoration: underline;
  }

  .calculator-disclaimer a:hover {
    color: var(--primary-navy);
  }

  /* Dark mode for calculator */
  :global([data-theme='dark']) .rmd-calculator {
    background: linear-gradient(135deg, rgba(99, 179, 237, 0.1) 0%, rgba(99, 179, 237, 0.05) 100%);
    border-color: rgba(99, 179, 237, 0.2);
  }

  :global([data-theme='dark']) .calculator-title h3 {
    color: var(--text-dark);
  }

  :global([data-theme='dark']) .calculator-form {
    background: var(--card-bg);
  }

  :global([data-theme='dark']) .form-group label {
    color: var(--text-dark);
  }

  :global([data-theme='dark']) .form-group input,
  :global([data-theme='dark']) .form-group select {
    background: var(--bg-primary);
    border-color: rgba(255, 255, 255, 0.1);
    color: var(--text-dark);
  }

  :global([data-theme='dark']) .form-group input:focus,
  :global([data-theme='dark']) .form-group select:focus {
    border-color: var(--accent-blue);
    box-shadow: 0 0 0 3px rgba(99, 179, 237, 0.2);
  }

  :global([data-theme='dark']) .currency-symbol {
    color: var(--text-light);
  }

  :global([data-theme='dark']) .calculator-actions .btn-secondary {
    background: var(--bg-primary);
    border-color: rgba(255, 255, 255, 0.1);
    color: var(--text-dark);
  }

  :global([data-theme='dark']) .calculator-actions .btn-secondary:hover {
    border-color: var(--accent-blue);
    background: rgba(99, 179, 237, 0.1);
  }

  :global([data-theme='dark']) .result-card {
    background: linear-gradient(135deg, rgba(72, 187, 120, 0.2) 0%, rgba(72, 187, 120, 0.1) 100%);
    border-color: #48bb78;
  }

  :global([data-theme='dark']) .result-label {
    color: #9ae6b4;
  }

  :global([data-theme='dark']) .result-amount {
    color: #68d391;
  }

  :global([data-theme='dark']) .result-details {
    color: #9ae6b4;
  }

  :global([data-theme='dark']) .qcd-suggestion {
    background: linear-gradient(135deg, rgba(99, 179, 237, 0.15) 0%, rgba(99, 179, 237, 0.1) 100%);
    border-left-color: var(--accent-blue);
  }

  :global([data-theme='dark']) .suggestion-content {
    color: #90cdf4;
  }

  :global([data-theme='dark']) .suggestion-content strong {
    color: #bee3f8;
  }

  :global([data-theme='dark']) .calculator-disclaimer {
    background: rgba(255, 255, 255, 0.05);
  }

  :global([data-theme='dark']) .calculator-disclaimer a {
    color: var(--accent-blue);
  }

  /* Tax Comparison Section */
  .tax-comparison {
    background: #fff;
    border-radius: 16px;
    padding: 2rem;
    margin-bottom: 3rem;
    box-shadow:
      0 4px 6px -1px rgba(0, 0, 0, 0.05),
      0 10px 20px -5px rgba(0, 0, 0, 0.08);
    border: 1px solid #e2e8f0;
  }

  .tax-comparison h3 {
    text-align: center;
    color: var(--primary-navy);
    margin-bottom: 0.75rem;
    font-size: 1.375rem;
  }

  .comparison-intro {
    text-align: center;
    color: var(--text-light);
    margin-bottom: 1.5rem;
    max-width: 700px;
    margin-left: auto;
    margin-right: auto;
  }

  .scenario-description {
    background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
    border-radius: 10px;
    padding: 1.25rem;
    margin-bottom: 2rem;
    border-left: 4px solid var(--primary-blue);
  }

  .scenario-description p {
    margin: 0;
    color: var(--text-dark);
    line-height: 1.6;
  }

  .comparison-grid {
    display: grid;
    grid-template-columns: 1fr auto 1fr;
    gap: 1.5rem;
    align-items: stretch;
    margin-bottom: 2rem;
  }

  .scenario-card {
    border-radius: 12px;
    overflow: hidden;
    border: 2px solid #e2e8f0;
  }

  .scenario-cash {
    border-color: #e2e8f0;
  }

  .scenario-qcd {
    border-color: #48bb78;
    box-shadow: 0 4px 12px rgba(72, 187, 120, 0.2);
  }

  .scenario-header {
    padding: 1rem 1.25rem;
    position: relative;
  }

  .scenario-cash .scenario-header {
    background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
  }

  .scenario-qcd .scenario-header {
    background: linear-gradient(135deg, #f0fff4 0%, #c6f6d5 100%);
  }

  .scenario-number {
    display: inline-block;
    font-size: 0.75rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--text-light);
    margin-bottom: 0.25rem;
  }

  .scenario-qcd .scenario-number {
    color: #276749;
  }

  .scenario-header h4 {
    margin: 0;
    font-size: 1.0625rem;
    color: var(--primary-navy);
  }

  .scenario-qcd .scenario-header h4 {
    color: #22543d;
  }

  .recommended-badge {
    position: absolute;
    top: 0.75rem;
    right: 0.75rem;
    background: #48bb78;
    color: #fff;
    font-size: 0.6875rem;
    font-weight: 700;
    padding: 0.25rem 0.5rem;
    border-radius: 4px;
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }

  .scenario-body {
    padding: 1.25rem;
    background: #fff;
  }

  .calculation-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.5rem 0;
    border-bottom: 1px solid #f1f5f9;
  }

  .calculation-row:last-child {
    border-bottom: none;
  }

  .calculation-row.subtotal {
    border-top: 1px solid #e2e8f0;
    margin-top: 0.5rem;
    padding-top: 0.75rem;
  }

  .calculation-row.total {
    border-top: 2px solid #e2e8f0;
    margin-top: 0.5rem;
    padding-top: 0.75rem;
  }

  .calc-label {
    font-size: 0.875rem;
    color: var(--text-light);
  }

  .calculation-row.subtotal .calc-label,
  .calculation-row.total .calc-label {
    font-weight: 600;
    color: var(--text-dark);
  }

  .calc-value {
    font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Fira Mono', monospace;
    font-size: 0.9375rem;
    font-weight: 500;
  }

  .calc-value.add {
    color: #c53030;
  }

  .calc-value.subtract {
    color: #2f855a;
  }

  .calc-value.neutral {
    color: var(--text-light);
  }

  .calc-value.highlight-bad {
    font-size: 1.25rem;
    font-weight: 800;
    color: #c53030;
    background: rgba(197, 48, 48, 0.1);
    padding: 0.25rem 0.5rem;
    border-radius: 4px;
  }

  .calc-value.highlight-good {
    font-size: 1.25rem;
    font-weight: 800;
    color: #22543d;
    background: rgba(72, 187, 120, 0.2);
    padding: 0.25rem 0.5rem;
    border-radius: 4px;
  }

  .scenario-note {
    padding: 0.75rem 1.25rem;
    font-size: 0.8125rem;
    font-weight: 600;
    text-align: center;
  }

  .scenario-note-bad {
    background: rgba(197, 48, 48, 0.1);
    color: #c53030;
    border-top: 1px solid rgba(197, 48, 48, 0.2);
  }

  .scenario-note-good {
    background: rgba(72, 187, 120, 0.15);
    color: #22543d;
    border-top: 1px solid rgba(72, 187, 120, 0.3);
  }

  .scenario-vs {
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .scenario-vs span {
    background: var(--primary-navy);
    color: #fff;
    font-size: 0.75rem;
    font-weight: 700;
    padding: 0.5rem 0.75rem;
    border-radius: 6px;
  }

  .savings-highlight {
    display: flex;
    gap: 1rem;
    background: linear-gradient(135deg, #f0fff4 0%, #c6f6d5 100%);
    border-radius: 12px;
    padding: 1.5rem;
    border: 2px solid #48bb78;
    margin-bottom: 1.5rem;
  }

  .savings-icon {
    width: 56px;
    height: 56px;
    background: #48bb78;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #fff;
    flex-shrink: 0;
  }

  .savings-content {
    color: #22543d;
  }

  .savings-content strong {
    display: block;
    font-size: 1.125rem;
    margin-bottom: 0.25rem;
  }

  .savings-content p {
    margin: 0;
    font-size: 0.9375rem;
    line-height: 1.5;
    color: #276749;
  }

  .comparison-footnotes {
    font-size: 0.8125rem;
    color: var(--text-light);
    line-height: 1.5;
  }

  .comparison-footnotes p {
    margin: 0 0 0.5rem;
  }

  .comparison-footnotes .disclaimer-note {
    margin-top: 1rem;
    padding-top: 0.75rem;
    border-top: 1px solid #e2e8f0;
    font-style: italic;
  }

  /* Dark mode for tax comparison */
  :global([data-theme='dark']) .tax-comparison {
    background: var(--card-bg);
    border-color: rgba(255, 255, 255, 0.1);
  }

  :global([data-theme='dark']) .tax-comparison h3 {
    color: var(--text-dark);
  }

  :global([data-theme='dark']) .scenario-description {
    background: linear-gradient(135deg, rgba(99, 179, 237, 0.1) 0%, rgba(99, 179, 237, 0.05) 100%);
    border-left-color: var(--accent-blue);
  }

  :global([data-theme='dark']) .scenario-card {
    border-color: rgba(255, 255, 255, 0.1);
  }

  :global([data-theme='dark']) .scenario-cash .scenario-header {
    background: linear-gradient(
      135deg,
      rgba(255, 255, 255, 0.05) 0%,
      rgba(255, 255, 255, 0.02) 100%
    );
  }

  :global([data-theme='dark']) .scenario-qcd {
    border-color: #48bb78;
  }

  :global([data-theme='dark']) .scenario-qcd .scenario-header {
    background: linear-gradient(135deg, rgba(72, 187, 120, 0.2) 0%, rgba(72, 187, 120, 0.1) 100%);
  }

  :global([data-theme='dark']) .scenario-header h4 {
    color: var(--text-dark);
  }

  :global([data-theme='dark']) .scenario-qcd .scenario-header h4 {
    color: #9ae6b4;
  }

  :global([data-theme='dark']) .scenario-qcd .scenario-number {
    color: #9ae6b4;
  }

  :global([data-theme='dark']) .scenario-body {
    background: var(--bg-primary);
  }

  :global([data-theme='dark']) .calculation-row {
    border-bottom-color: rgba(255, 255, 255, 0.05);
  }

  :global([data-theme='dark']) .calculation-row.subtotal,
  :global([data-theme='dark']) .calculation-row.total {
    border-top-color: rgba(255, 255, 255, 0.1);
  }

  :global([data-theme='dark']) .calculation-row.subtotal .calc-label,
  :global([data-theme='dark']) .calculation-row.total .calc-label {
    color: var(--text-dark);
  }

  :global([data-theme='dark']) .calc-value.add {
    color: #fc8181;
  }

  :global([data-theme='dark']) .calc-value.subtract {
    color: #68d391;
  }

  :global([data-theme='dark']) .calc-value.highlight-bad {
    color: #feb2b2;
    background: rgba(252, 129, 129, 0.2);
  }

  :global([data-theme='dark']) .calc-value.highlight-good {
    color: #9ae6b4;
    background: rgba(72, 187, 120, 0.25);
  }

  :global([data-theme='dark']) .scenario-note-bad {
    background: rgba(252, 129, 129, 0.15);
    color: #feb2b2;
    border-top-color: rgba(252, 129, 129, 0.2);
  }

  :global([data-theme='dark']) .scenario-note-good {
    background: rgba(72, 187, 120, 0.2);
    color: #9ae6b4;
    border-top-color: rgba(72, 187, 120, 0.3);
  }

  :global([data-theme='dark']) .savings-highlight {
    background: linear-gradient(135deg, rgba(72, 187, 120, 0.2) 0%, rgba(72, 187, 120, 0.1) 100%);
    border-color: #48bb78;
  }

  :global([data-theme='dark']) .savings-content {
    color: #9ae6b4;
  }

  :global([data-theme='dark']) .savings-content strong {
    color: #68d391;
  }

  :global([data-theme='dark']) .savings-content p {
    color: #9ae6b4;
  }

  :global([data-theme='dark']) .comparison-footnotes .disclaimer-note {
    border-top-color: rgba(255, 255, 255, 0.1);
  }

  /* Responsive */
  @media (max-width: 900px) {
    .comparison-grid {
      grid-template-columns: 1fr;
      gap: 1rem;
    }

    .scenario-vs {
      display: none;
    }
  }

  @media (max-width: 600px) {
    .form-row {
      grid-template-columns: 1fr;
      gap: 1rem;
    }

    .calculator-actions {
      flex-direction: column;
    }

    .calculator-actions .btn {
      width: 100%;
    }

    .result-amount {
      font-size: 2rem;
    }

    .qcd-suggestion {
      flex-direction: column;
      text-align: center;
    }

    .suggestion-icon {
      margin: 0 auto;
    }

    .tax-comparison {
      padding: 1.5rem;
    }

    .savings-highlight {
      flex-direction: column;
      text-align: center;
    }

    .savings-icon {
      margin: 0 auto;
    }
  }
</style>

<script>
  // IRS Uniform Lifetime Table (2024) - Distribution Period by Age
  // Source: https://www.irs.gov/publications/p590b
  const uniformLifetimeTable: Record<number, number> = {
    73: 26.5,
    74: 25.5,
    75: 24.6,
    76: 23.7,
    77: 22.9,
    78: 22.0,
    79: 21.1,
    80: 20.2,
    81: 19.4,
    82: 18.5,
    83: 17.7,
    84: 16.8,
    85: 16.0,
    86: 15.2,
    87: 14.4,
    88: 13.7,
    89: 12.9,
    90: 12.2,
    91: 11.5,
    92: 10.8,
    93: 10.1,
    94: 9.5,
    95: 8.9,
    96: 8.4,
    97: 7.8,
    98: 7.3,
    99: 6.8,
    100: 6.4,
    101: 6.0,
    102: 5.6,
    103: 5.2,
    104: 4.9,
    105: 4.6,
    106: 4.3,
    107: 4.1,
    108: 3.9,
    109: 3.7,
    110: 3.5,
    111: 3.4,
    112: 3.3,
    113: 3.1,
    114: 3.0,
    115: 2.9,
    116: 2.8,
    117: 2.7,
    118: 2.5,
    119: 2.3,
    120: 2.0,
  };

  function formatCurrency(amount: number): string {
    return new Intl.NumberFormat('en-US', {
      style: 'currency',
      currency: 'USD',
      minimumFractionDigits: 0,
      maximumFractionDigits: 0,
    }).format(amount);
  }

  function parseBalance(value: string): number {
    // Remove all non-numeric characters except decimal point
    const cleaned = value.replace(/[^0-9.]/g, '');
    return parseFloat(cleaned) || 0;
  }

  function calculateRMD(balance: number, age: number): { rmd: number; period: number } | null {
    const period = uniformLifetimeTable[age];
    if (!period) return null;

    const rmd = balance / period;
    return { rmd, period };
  }

  document.addEventListener('DOMContentLoaded', () => {
    const balanceInput = document.getElementById('account-balance') as HTMLInputElement;
    const ageSelect = document.getElementById('age-select') as HTMLSelectElement;
    const calculateBtn = document.getElementById('calculate-rmd') as HTMLButtonElement;
    const resetBtn = document.getElementById('reset-calculator') as HTMLButtonElement;
    const resultSection = document.getElementById('rmd-result') as HTMLDivElement;
    const rmdAmount = document.getElementById('rmd-amount') as HTMLSpanElement;
    const resultBalance = document.getElementById('result-balance') as HTMLSpanElement;
    const resultAge = document.getElementById('result-age') as HTMLSpanElement;
    const resultPeriod = document.getElementById('result-period') as HTMLSpanElement;
    const qcdMax = document.getElementById('qcd-max') as HTMLSpanElement;

    // Format balance input on blur
    balanceInput?.addEventListener('blur', () => {
      const value = parseBalance(balanceInput.value);
      if (value > 0) {
        balanceInput.value = value.toLocaleString('en-US');
      }
    });

    // Remove formatting on focus
    balanceInput?.addEventListener('focus', () => {
      const value = parseBalance(balanceInput.value);
      if (value > 0) {
        balanceInput.value = value.toString();
      }
    });

    // Calculate RMD
    calculateBtn?.addEventListener('click', () => {
      const balance = parseBalance(balanceInput.value);
      const age = parseInt(ageSelect.value, 10);

      // Validation
      if (balance <= 0) {
        balanceInput.focus();
        balanceInput.style.borderColor = '#e53e3e';
        setTimeout(() => {
          balanceInput.style.borderColor = '';
        }, 2000);
        return;
      }

      if (!age) {
        ageSelect.focus();
        ageSelect.style.borderColor = '#e53e3e';
        setTimeout(() => {
          ageSelect.style.borderColor = '';
        }, 2000);
        return;
      }

      const result = calculateRMD(balance, age);
      if (!result) return;

      // Calculate QCD max (lesser of RMD or $111,000 limit for 2026)
      const qcdLimit = 111000;
      const qcdMaxAmount = Math.min(result.rmd, qcdLimit);

      // Update results
      rmdAmount.textContent = formatCurrency(result.rmd);
      resultBalance.textContent = formatCurrency(balance);
      resultAge.textContent = age.toString();
      resultPeriod.textContent = result.period.toString();
      qcdMax.textContent = formatCurrency(qcdMaxAmount);

      // Show results
      resultSection.hidden = false;
      resultSection.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
    });

    // Reset calculator
    resetBtn?.addEventListener('click', () => {
      balanceInput.value = '';
      ageSelect.value = '';
      resultSection.hidden = true;
    });
  });
</script>
